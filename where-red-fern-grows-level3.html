<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Where the Red Fern Grows - Level 3 - ÏàòÎ¶¨Îî©Ïñ¥ÌïôÏõê</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #8B4513 0%, #CD853F 50%, #32CD32 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
        }

        /* Ìó§Îçî */
        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 25px 30px;
            margin-bottom: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(45deg, #8B4513, #32CD32);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
        }

        .logo-text h1 {
            font-size: 1.8rem;
            font-weight: 700;
            color: #333;
        }

        .logo-text p {
            font-size: 0.9rem;
            color: #666;
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
        }

        .nav-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            background: #f8f9fa;
            color: #333;
            text-decoration: none;
        }

        .nav-btn:hover {
            background: #8B4513;
            color: white;
            transform: translateY(-2px);
        }

        /* Î©îÏù∏ ÏΩòÌÖêÏ∏† ÏòÅÏó≠ */
        .main-content {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            min-height: 600px;
        }

        /* Ï±Ö ÏÉÅÏÑ∏ ÌôîÎ©¥ */
        .breadcrumb {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 30px;
            font-size: 0.9rem;
            color: #666;
        }

        .breadcrumb a {
            color: #8B4513;
            text-decoration: none;
            cursor: pointer;
        }

        .breadcrumb a:hover {
            text-decoration: underline;
        }

        .book-detail-header {
            display: flex;
            gap: 30px;
            margin-bottom: 40px;
            align-items: flex-start;
        }

        .detail-book-cover {
            width: 150px;
            height: 220px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 4rem;
            font-weight: bold;
            flex-shrink: 0;
            background: linear-gradient(45deg, #8B4513, #32CD32);
        }

        .book-info {
            flex: 1;
        }

        .book-info h2 {
            font-size: 2.2rem;
            font-weight: 700;
            color: #333;
            margin-bottom: 10px;
        }

        .book-info .author {
            font-size: 1.2rem;
            color: #8B4513;
            margin-bottom: 20px;
        }

        .book-summary {
            font-size: 1rem;
            color: #666;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .book-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .stat-box {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-box .value {
            font-size: 1.5rem;
            font-weight: 700;
            color: #8B4513;
        }

        .stat-box .label {
            font-size: 0.9rem;
            color: #666;
            margin-top: 5px;
        }

        /* Ï±ïÌÑ∞ Í∑∏Î¶¨Îìú */
        .chapters-section {
            margin-top: 40px;
        }

        .chapters-section h3 {
            font-size: 1.8rem;
            font-weight: 700;
            color: #333;
            margin-bottom: 30px;
            text-align: center;
        }

        .chapters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
        }

        .chapter-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            border: 2px solid transparent;
            position: relative;
        }

        .chapter-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .chapter-card.completed {
            border-color: #28a745;
            background: linear-gradient(135deg, #28a74508, #ffffff);
        }

        .chapter-card.current {
            border-color: #8B4513;
            background: linear-gradient(135deg, #8B451308, #ffffff);
        }

        .chapter-card.locked {
            opacity: 0.6;
            background: #f8f9fa;
        }

        .chapter-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 20px;
        }

        .chapter-info h4 {
            font-size: 1.3rem;
            font-weight: 700;
            color: #333;
            margin-bottom: 8px;
        }

        .chapter-info p {
            font-size: 0.95rem;
            color: #666;
            line-height: 1.5;
        }

        .chapter-status {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .chapter-status.completed {
            background: rgba(40, 167, 69, 0.1);
            color: #28a745;
        }

        .chapter-status.current {
            background: rgba(139, 69, 19, 0.1);
            color: #8B4513;
        }

        .chapter-status.locked {
            background: rgba(108, 117, 125, 0.1);
            color: #6c757d;
        }

        .chapter-actions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 20px;
        }

        .chapter-btn {
            padding: 12px 16px;
            border: none;
            border-radius: 10px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .audio-btn {
            background: linear-gradient(45deg, #8B4513, #CD853F);
            color: white;
        }

        .quiz-btn {
            background: linear-gradient(45deg, #32CD32, #228B22);
            color: white;
        }

        .chapter-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .chapter-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* ÌïôÏäµ ÌôîÎ©¥ */
        .learning-screen {
            display: none;
        }

        .learning-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .learning-progress {
            background: #f8f9fa;
            border-radius: 10px;
            height: 8px;
            margin: 20px 0;
            overflow: hidden;
        }

        .learning-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #8B4513, #32CD32);
            transition: width 0.3s ease;
        }

        .question-container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        .question-text {
            font-size: 1.2rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 20px;
        }

        .passage {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            font-size: 1rem;
            line-height: 1.6;
            color: #444;
        }

        .options {
            display: grid;
            gap: 10px;
        }

        .option {
            background: #f8f9fa;
            border: 2px solid transparent;
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .option:hover {
            background: #e9ecef;
            border-color: #8B4513;
        }

        .option.selected {
            background: rgba(139, 69, 19, 0.1);
            border-color: #8B4513;
        }

        .learning-controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
        }

        .control-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .next-btn {
            background: linear-gradient(45deg, #8B4513, #32CD32);
            color: white;
        }

        .prev-btn {
            background: #6c757d;
            color: white;
        }

        .submit-btn {
            background: linear-gradient(45deg, #8B4513, #32CD32);
            color: white;
        }

        .control-btn:hover {
            transform: translateY(-2px);
        }

        .control-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* Í≤∞Í≥º ÌôîÎ©¥ */
        .result-screen {
            display: none;
            text-align: center;
        }

        .score-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: linear-gradient(45deg, #8B4513, #32CD32);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            color: white;
            font-size: 2rem;
            font-weight: bold;
        }

        .result-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .result-stat {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
        }

        .result-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
        }

        /* Ïò§ÎîîÏò§ ÌîåÎ†àÏù¥Ïñ¥ Î™®Îã¨ */
        .audio-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .audio-content {
            background: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            max-width: 600px;
            width: 90%;
            position: relative;
        }

        .close-audio {
            position: absolute;
            top: 15px;
            right: 20px;
            background: none;
            border: none;
            font-size: 2rem;
            cursor: pointer;
            color: #666;
        }

        .audio-player {
            width: 100%;
            margin: 20px 0;
            border-radius: 10px;
        }

        .audio-controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .audio-control-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .play-pause-btn {
            background: linear-gradient(45deg, #8B4513, #CD853F);
            color: white;
        }

        .speed-btn {
            background: #f8f9fa;
            color: #333;
            border: 1px solid #ddd;
        }

        .download-btn {
            background: #32CD32;
            color: white;
        }

        .audio-info {
            margin-top: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            font-size: 0.9rem;
            color: #666;
            transition: all 0.3s ease;
        }

        .audio-info.hidden {
            display: none;
        }

        /* Î∞òÏùëÌòï */
        @media (max-width: 768px) {
            .chapters-grid {
                grid-template-columns: 1fr;
            }

            .header {
                flex-direction: column;
                gap: 20px;
                text-align: center;
            }

            .book-detail-header {
                flex-direction: column;
                text-align: center;
            }

            .book-stats {
                grid-template-columns: repeat(2, 1fr);
            }

            .learning-controls {
                flex-direction: column;
            }

            .chapter-actions {
                grid-template-columns: 1fr;
            }

            .audio-controls {
                justify-content: center;
                gap: 10px;
            }

            .audio-content {
                padding: 30px 20px;
            }
        }

        .new-book-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: linear-gradient(45deg, #FF6B9D, #C44569);
            color: white;
            padding: 4px 8px;
            border-radius: 15px;
            font-size: 0.7rem;
            font-weight: 700;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Ìó§Îçî -->
        <div class="header">
            <div class="logo">
                <div class="logo-icon">üêï</div>
                <div class="logo-text">
                    <h1>Where the Red Fern Grows</h1>
                    <p>Level 3 - Wilson RawlsÏùò Îπ®Í∞Ñ Í≥†ÏÇ¨Î¶¨Í∞Ä ÏûêÎùºÎäî Í≥≥</p>
                </div>
            </div>
            <div class="nav-buttons">
                <a href="http://www.suelibrary.store/" class="nav-btn">Î©îÏù∏ÏúºÎ°ú</a>
            </div>
        </div>

        <!-- Î©îÏù∏ ÏΩòÌÖêÏ∏† -->
        <div class="main-content">
            <!-- Ï±Ö ÏÉÅÏÑ∏ ÌôîÎ©¥ -->
            <div class="book-detail-screen" id="book-detail-screen">
                <div class="breadcrumb">
                  
             
                    <span>Where the Red Fern Grows</span>
                </div>

                <div class="book-detail-header">
                    <div class="detail-book-cover">üêï</div>
                    <div class="book-info">
                        <h2>Where the Red Fern Grows</h2>
                        <div class="author">Wilson Rawls</div>
                        <div class="book-summary">
                            Follow young Billy Colman's heartwarming journey as he saves money to buy two hunting dogs, Old Dan and Little Ann. Set in the Ozark Mountains, this touching story explores determination, friendship, love, and the unbreakable bond between a boy and his dogs.
                        </div>
                        <div class="book-stats">
                            <div class="stat-box">
                                <div class="value">20</div>
                                <div class="label">Ï±ïÌÑ∞</div>
                            </div>
                            <div class="stat-box">
                                <div class="value">100</div>
                                <div class="label">Ï¥ù Î¨∏Ï†ú</div>
                            </div>
                            <div class="stat-box">
                                <div class="value">Level 3</div>
                                <div class="label">Î†àÎ≤®</div>
                            </div>
                            <div class="stat-box">
                                <div class="value" id="progress-value">0%</div>
                                <div class="label">ÏßÑÎèÑ</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="chapters-section">
                    <h3>üìñ Ï±ïÌÑ∞Î≥Ñ ÌïôÏäµ</h3>
                    <div class="chapters-grid" id="chapters-grid">
                        <!-- Ï±ïÌÑ∞ Ïπ¥ÎìúÎì§ -->
                    </div>
                </div>
            </div>

            <!-- ÌïôÏäµ ÌôîÎ©¥ -->
            <div class="learning-screen" id="learning-screen">
                <div class="breadcrumb">
                    <a href="/level3">Level 3</a>
                    <span>></span>
                    <a onclick="showBookDetail()">Where the Red Fern Grows</a>
                    <span>></span>
                    <span id="learning-chapter-breadcrumb">Chapter 1</span>
                </div>

                <div class="learning-header">
                    <h2 id="learning-title">Chapter 1: The Old Dog</h2>
                    <div class="learning-progress">
                        <div class="learning-progress-bar" id="learning-progress-bar" style="width: 0%"></div>
                    </div>
                    <p id="learning-progress-text">Î¨∏Ï†ú 1 / 5</p>
                </div>

                <div class="question-container" id="question-container">
                    <!-- Î¨∏Ï†úÍ∞Ä ÎèôÏ†ÅÏúºÎ°ú ÏÉùÏÑ±Îê©ÎãàÎã§ -->
                </div>

                <div class="learning-controls">
                    <button class="control-btn prev-btn" id="prev-btn" onclick="previousQuestion()" disabled>Ïù¥Ï†Ñ</button>
                    <button class="control-btn next-btn" id="next-btn" onclick="nextQuestion()">Îã§Ïùå</button>
                    <button class="control-btn submit-btn" id="submit-btn" onclick="submitAnswers()" style="display: none;">Ï†úÏ∂ú</button>
                </div>
            </div>

            <!-- Í≤∞Í≥º ÌôîÎ©¥ -->
            <div class="result-screen" id="result-screen">
                <div class="breadcrumb">
                    <a onclick="showBookDetail()">Where the Red Fern Grows</a>
                    <span>></span>
                    <span>Í≤∞Í≥º</span>
                </div>

                <div class="result-header">
                    <h2>üéâ ÌïôÏäµ ÏôÑÎ£å!</h2>
                    <div class="score-circle" id="score-circle">100%</div>
                    <h3 id="result-message">ÌõåÎ•≠Ìï©ÎãàÎã§!</h3>
                </div>

                <div class="result-details">
                    <div class="result-stat">
                        <h4>Ï¥ù Î¨∏Ï†ú</h4>
                        <p id="total-questions">5Î¨∏Ï†ú</p>
                    </div>
                    <div class="result-stat">
                        <h4>Ï†ïÎãµ</h4>
                        <p id="correct-answers">5Î¨∏Ï†ú</p>
                    </div>
                    <div class="result-stat">
                        <h4>Ïò§Îãµ</h4>
                        <p id="wrong-answers">0Î¨∏Ï†ú</p>
                    </div>
                    <div class="result-stat">
                        <h4>Ï†êÏàò</h4>
                        <p id="final-score">100Ï†ê</p>
                    </div>
                </div>

                <div class="result-actions">
                    <button class="control-btn prev-btn" onclick="retryChapter()">Îã§Ïãú ÌíÄÍ∏∞</button>
                    <button class="control-btn next-btn" onclick="nextChapter()">Îã§Ïùå Ï±ïÌÑ∞</button>
                    <button class="control-btn submit-btn" onclick="showBookDetail()">Ï±ïÌÑ∞ Î™©Î°ù</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Ïò§ÎîîÏò§ ÌîåÎ†àÏù¥Ïñ¥ Î™®Îã¨ -->
    <div class="audio-modal" id="audio-modal">
        <div class="audio-content">
            <button class="close-audio" onclick="closeAudioModal()">√ó</button>
            <h3 id="audio-chapter-title">Chapter 1: The Old Dog</h3>
            <p id="audio-chapter-subtitle">Where the Red Fern Grows - Wilson Rawls</p>

            <audio class="audio-player" id="audio-player" controls preload="metadata">
                <source id="audio-source" src="" type="audio/mpeg">
                Î∏åÎùºÏö∞Ï†ÄÍ∞Ä Ïò§ÎîîÏò§Î•º ÏßÄÏõêÌïòÏßÄ ÏïäÏäµÎãàÎã§.
            </audio>

            <div class="audio-controls">
                <button class="audio-control-btn play-pause-btn" onclick="togglePlayPause()">‚ñ∂Ô∏è Ïû¨ÏÉù</button>
                <button class="audio-control-btn speed-btn" onclick="changeSpeed()">1.0x</button>
                <button class="audio-control-btn" onclick="resetToChapterStart()" style="background: #28a745; color: white;">üîÑ Íµ¨Í∞ÑÏ≤òÏùå</button>
                <button class="audio-control-btn download-btn" onclick="downloadAudio()">üì• Îã§Ïö¥Î°úÎìú</button>
            </div>

            <div class="audio-info" id="audio-info">
                <div id="audio-status" style="margin-top: 10px; font-weight: bold; color: #8B4513;"></div>
            </div>
        </div>
    </div>

    <script>
        // üéØ Íµ¨Í∏Ä ÌÅ¥ÎùºÏö∞Îìú Ïä§ÌÜ†Î¶¨ÏßÄ Ïò§ÎîîÏò§ URL ÏÑ§Ï†ï
        const AUDIO_BASE_URL = 'https://storage.googleapis.com/kim-mom-reading-audio/audio/';

        // Where the Red Fern Grows ÎèÑÏÑú Îç∞Ïù¥ÌÑ∞ (Ï†ÑÏ≤¥ 20Ï±ïÌÑ∞)
        const bookData = {
            id: 'WRFG001',
            title: "Where the Red Fern Grows",
            author: 'Wilson Rawls',
            cover: 'üêï',
            progress: 0,
            chapters: 20,
            totalQuestions: 100, // 20Ï±ïÌÑ∞ √ó 5Î¨∏Ï†ú
            coverColor: 'linear-gradient(45deg, #8B4513, #32CD32)',
            summary: "Follow young Billy Colman's heartwarming journey as he saves money to buy two hunting dogs, Old Dan and Little Ann. Set in the Ozark Mountains, this touching story explores determination, friendship, love, and the unbreakable bond between a boy and his dogs.",
            chapterList: [
                { title: 'The Old Dog', description: 'Billy encounters an old redbone hound that reminds him of his own dogs.', status: 'current', questionCount: 5, startTime: 0 },
                { title: 'The Dream', description: 'Young Billy dreams of owning his own hunting dogs.', status: 'locked', questionCount: 5, startTime: 480 },
                { title: 'Saving Money', description: 'Billy begins working hard to save money for two hounds.', status: 'locked', questionCount: 5, startTime: 960 },
                { title: 'The Advertisement', description: 'Billy finds an ad for coon dogs in a magazine.', status: 'locked', questionCount: 5, startTime: 1440 },
                { title: 'The Long Journey', description: 'Billy walks to town to pick up his dogs.', status: 'locked', questionCount: 5, startTime: 1920 },
                { title: 'Old Dan and Little Ann', description: 'Billy meets his two puppies for the first time.', status: 'locked', questionCount: 5, startTime: 2400 },
                { title: 'Training Begins', description: 'Billy starts training his dogs to hunt raccoons.', status: 'locked', questionCount: 5, startTime: 2880 },
                { title: 'The First Hunt', description: 'The dogs go on their first successful raccoon hunt.', status: 'locked', questionCount: 5, startTime: 3360 },
                { title: 'The Ghost Coon', description: 'The dogs encounter a legendary raccoon that seems impossible to catch.', status: 'locked', questionCount: 5, startTime: 3840 },
                { title: 'The Bet', description: 'Billy makes a bet with the Pritchard boys about catching the ghost coon.', status: 'locked', questionCount: 5, startTime: 4320 },
                { title: 'The Sacred Tree', description: 'The ghost coon is finally caught, but tragedy strikes the Pritchards.', status: 'locked', questionCount: 5, startTime: 4800 },
                { title: 'Championship Dreams', description: 'Billy learns about the big coon hunting championship.', status: 'locked', questionCount: 5, startTime: 5280 },
                { title: 'Getting Ready', description: 'Billy and his family prepare for the hunting contest.', status: 'locked', questionCount: 5, startTime: 5760 },
                { title: 'The Competition', description: 'The family travels to the championship hunting contest.', status: 'locked', questionCount: 5, startTime: 6240 },
                { title: 'Night of Champions', description: 'Old Dan and Little Ann compete against the best hunting dogs.', status: 'locked', questionCount: 5, startTime: 6720 },
                { title: 'Victory and Prizes', description: 'Billy\'s dogs win the championship and valuable prizes.', status: 'locked', questionCount: 5, startTime: 7200 },
                { title: 'The Mountain Lion', description: 'A dangerous mountain lion threatens the dogs during a hunt.', status: 'locked', questionCount: 5, startTime: 7680 },
                { title: 'The Battle', description: 'Old Dan fights bravely against the mountain lion to protect Little Ann.', status: 'locked', questionCount: 5, startTime: 8160 },
                { title: 'Farewell', description: 'Billy must say goodbye to his beloved dogs.', status: 'locked', questionCount: 5, startTime: 8640 },
                { title: 'The Red Fern', description: 'Billy discovers the legendary red fern growing on his dogs\' graves.', status: 'locked', questionCount: 5, startTime: 9120 }
            ]
        };

        // Î¨∏Ï†ú Îç∞Ïù¥ÌÑ∞ (Ï†ÑÏ≤¥ 20Ï±ïÌÑ∞ ÏôÑÎ£å)
        const questionsData = {
            0: [ // Chapter 1: The Old Dog
                {
                    passage: "On his way home from work, Billy saw an old redbone hound fighting with other dogs. The old dog was beaten and bloody, but still had courage in his eyes.",
                    question: "What kind of dog did Billy see on his way home?",
                    options: ["A young puppy", "An old redbone hound", "A hunting cat", "A wild wolf"],
                    correct: 1
                },
                {
                    passage: "Billy helped the old dog and gave him some food. The dog reminded him of his own dogs from many years ago when he was a boy.",
                    question: "What did the old dog remind Billy of?",
                    options: ["His childhood fears", "His own dogs from when he was a boy", "His work problems", "His family troubles"],
                    correct: 1
                },
                {
                    passage: "As Billy looked at the old hound, memories came flooding back to him. He remembered the Ozark Mountains where he grew up as a boy.",
                    question: "Where did Billy grow up?",
                    options: ["In the city", "Near the ocean", "In the Ozark Mountains", "On a farm in Texas"],
                    correct: 2
                },
                {
                    passage: "The sight of the old dog brought back powerful memories of two dogs that had meant everything to him - Old Dan and Little Ann.",
                    question: "What were the names of Billy's dogs from his childhood?",
                    options: ["Rex and Spot", "Old Dan and Little Ann", "Max and Buddy", "Duke and Princess"],
                    correct: 1
                },
                {
                    passage: "Billy realized that seeing this old dog had awakened something deep inside him - memories of the greatest adventure of his childhood.",
                    question: "What did seeing the old dog awaken in Billy?",
                    options: ["Anger about the past", "Memories of his greatest childhood adventure", "Fear of dogs", "Sadness about his job"],
                    correct: 1
                }
            ],
            1: [ // Chapter 2: The Dream
                {
                    passage: "When Billy was ten years old, he wanted nothing more in the world than to own two coon hunting dogs. He dreamed about them every night.",
                    question: "What did ten-year-old Billy want more than anything?",
                    options: ["A bicycle", "Two coon hunting dogs", "A pony", "Video games"],
                    correct: 1
                },
                {
                    passage: "Billy's family was poor and lived in the Ozark Mountains. His father explained that they couldn't afford to buy hunting dogs.",
                    question: "Why couldn't Billy's family buy hunting dogs?",
                    options: ["They didn't like dogs", "They were poor and couldn't afford them", "Dogs were illegal", "They lived in the city"],
                    correct: 1
                },
                {
                    passage: "Even though his father said no, Billy refused to give up his dream. He was determined to find a way to get his dogs somehow.",
                    question: "How did Billy react when his father said they couldn't afford dogs?",
                    options: ["He gave up immediately", "He was determined to find another way", "He got angry and ran away", "He asked his mother instead"],
                    correct: 1
                },
                {
                    passage: "Billy would lie awake at night imagining himself with two beautiful redbone hounds, hunting raccoons in the mountains.",
                    question: "What would Billy imagine at night?",
                    options: ["Playing with friends", "Hunting raccoons with two redbone hounds", "Going to school", "Living in the city"],
                    correct: 1
                },
                {
                    passage: "The more Billy thought about having hunting dogs, the stronger his desire became. It was all he could think about.",
                    question: "What happened to Billy's desire for hunting dogs over time?",
                    options: ["It disappeared", "It became stronger", "It stayed the same", "It made him sick"],
                    correct: 1
                }
            ],
            2: [ // Chapter 3: Saving Money
                {
                    passage: "Billy decided that if his family couldn't buy him dogs, he would have to earn the money himself. He began looking for ways to make money.",
                    question: "What did Billy decide to do to get his dogs?",
                    options: ["Steal money", "Earn the money himself", "Ask his grandparents", "Forget about the dogs"],
                    correct: 1
                },
                {
                    passage: "Billy found work helping neighbors, picking berries, and selling vegetables. Every penny he earned went into his dog fund.",
                    question: "What did Billy do with every penny he earned?",
                    options: ["Bought candy", "Put it in his dog fund", "Gave it to his parents", "Spent it on toys"],
                    correct: 1
                },
                {
                    passage: "Billy's grandfather owned a country store and sometimes let Billy work there for small amounts of money.",
                    question: "Where did Billy sometimes work?",
                    options: ["At a factory", "At his grandfather's country store", "At a restaurant", "At a school"],
                    correct: 1
                },
                {
                    passage: "For two years, Billy saved every penny he could earn. His family was amazed by his determination and dedication.",
                    question: "How long did Billy save money for his dogs?",
                    options: ["Six months", "One year", "Two years", "Five years"],
                    correct: 2
                },
                {
                    passage: "Billy kept his money in an old can hidden in his room. He would count it every night, dreaming of the day he would have enough.",
                    question: "Where did Billy keep his saved money?",
                    options: ["In a bank", "In an old can in his room", "In his pocket", "Under his bed"],
                    correct: 1
                }
            ],
            3: [ // Chapter 4: The Advertisement
                {
                    passage: "One day at his grandfather's store, Billy found an old hunting magazine with an advertisement for redbone hound puppies.",
                    question: "Where did Billy find the advertisement for dogs?",
                    options: ["In a newspaper", "In a hunting magazine at his grandfather's store", "On the radio", "From a friend"],
                    correct: 1
                },
                {
                    passage: "The ad said that two redbone hound puppies cost fifty dollars. Billy counted his money and discovered he had exactly fifty dollars!",
                    question: "How much did two redbone hound puppies cost?",
                    options: ["Twenty-five dollars", "Fifty dollars", "One hundred dollars", "Seventy-five dollars"],
                    correct: 1
                },
                {
                    passage: "Billy was so excited he could hardly contain himself. After two years of saving, he finally had enough money for his dogs.",
                    question: "How did Billy feel when he realized he had enough money?",
                    options: ["Worried and scared", "So excited he could hardly contain himself", "Disappointed", "Confused"],
                    correct: 1
                },
                {
                    passage: "The advertisement said the dogs were located in Kentucky, far from Billy's home in the Ozark Mountains of Oklahoma.",
                    question: "Where were the dogs located?",
                    options: ["In Billy's hometown", "In Kentucky", "In Texas", "In Arkansas"],
                    correct: 1
                },
                {
                    passage: "Billy carefully cut out the advertisement and wrote a letter to order his two puppies, including all fifty dollars of his savings.",
                    question: "What did Billy do with his fifty dollars?",
                    options: ["Bought other things", "Sent it all to order the puppies", "Kept it hidden", "Gave it to his parents"],
                    correct: 1
                }
            ],
            4: [ // Chapter 5: The Long Journey
                {
                    passage: "Billy received a letter saying his dogs were ready for pickup at the train station in Tahlequah, thirty miles away from his home.",
                    question: "Where did Billy need to pick up his dogs?",
                    options: ["At his house", "At the train station in Tahlequah", "At his grandfather's store", "At a friend's house"],
                    correct: 1
                },
                {
                    passage: "Billy's father couldn't take time off work to drive him to town, so Billy decided he would walk the thirty miles by himself.",
                    question: "How did Billy plan to get to Tahlequah?",
                    options: ["His father would drive him", "He would walk by himself", "He would take a bus", "His grandfather would take him"],
                    correct: 1
                },
                {
                    passage: "Billy left early in the morning without telling his parents. He was determined to get his dogs no matter what.",
                    question: "When did Billy leave for Tahlequah?",
                    options: ["At night", "Early in the morning", "In the afternoon", "He never left"],
                    correct: 1
                },
                {
                    passage: "The journey was long and difficult. Billy's feet got sore and he became very tired, but he kept walking because he was so excited about his dogs.",
                    question: "How was the journey to Tahlequah for Billy?",
                    options: ["Easy and fun", "Long and difficult", "Short and simple", "Impossible to complete"],
                    correct: 1
                },
                {
                    passage: "After walking all day, Billy finally reached Tahlequah as the sun was setting. He was exhausted but happy that he had made it.",
                    question: "When did Billy reach Tahlequah?",
                    options: ["In the morning", "At noon", "As the sun was setting", "At midnight"],
                    correct: 2
                }
            ],
            5: [ // Chapter 6: Old Dan and Little Ann
                {
                    passage: "At the train station, Billy picked up a wooden crate containing two beautiful redbone hound puppies. His heart was filled with joy.",
                    question: "What was in the wooden crate at the train station?",
                    options: ["Food supplies", "Two beautiful redbone hound puppies", "Books", "Clothes"],
                    correct: 1
                },
                {
                    passage: "Billy decided to name the male puppy Old Dan because he seemed brave and strong. The female puppy he named Little Ann because she was smaller and gentle.",
                    question: "Why did Billy name the male puppy Old Dan?",
                    options: ["He was old", "He seemed brave and strong", "He was the biggest", "His grandfather suggested it"],
                    correct: 1
                },
                {
                    passage: "Little Ann was the smaller of the two puppies, but Billy could see intelligence and sweetness in her eyes.",
                    question: "What could Billy see in Little Ann's eyes?",
                    options: ["Fear and sadness", "Intelligence and sweetness", "Anger and confusion", "Nothing special"],
                    correct: 1
                },
                {
                    passage: "Billy spent the night in town with his puppies, sharing his food with them and getting to know their personalities.",
                    question: "What did Billy do his first night with the puppies?",
                    options: ["Went straight home", "Spent the night in town getting to know them", "Left them at the station", "Sold them for more money"],
                    correct: 1
                },
                {
                    passage: "The next morning, Billy began the long walk home, carrying both puppies in his arms when they got tired.",
                    question: "How did Billy help the puppies on the walk home?",
                    options: ["He left them behind", "He carried them when they got tired", "He made them walk the whole way", "He bought a wagon"],
                    correct: 1
                }
            ],
            6: [ // Chapter 7: Training Begins
                {
                    passage: "When Billy arrived home with his puppies, his family was shocked but happy to see his dream had come true.",
                    question: "How did Billy's family react when he came home with the puppies?",
                    options: ["They were angry", "They were shocked but happy", "They made him return them", "They ignored him"],
                    correct: 1
                },
                {
                    passage: "Billy's grandfather gave him advice about training coon dogs. He said it would take patience, consistency, and lots of practice.",
                    question: "What did Billy's grandfather say training would require?",
                    options: ["Only money", "Patience, consistency, and lots of practice", "Magic tricks", "Very little effort"],
                    correct: 1
                },
                {
                    passage: "Billy started training Old Dan and Little Ann by teaching them basic commands like sit, stay, and come.",
                    question: "What basic commands did Billy teach his dogs first?",
                    options: ["Roll over and play dead", "Sit, stay, and come", "Fetch and speak", "Jump and dance"],
                    correct: 1
                },
                {
                    passage: "Old Dan was eager and energetic, sometimes getting into trouble because of his enthusiasm. Little Ann was calmer and learned commands more quickly.",
                    question: "How were Old Dan and Little Ann different in their learning?",
                    options: ["They were exactly the same", "Old Dan was eager but got in trouble; Little Ann was calmer and learned faster", "Little Ann was more troublesome", "Old Dan was smarter"],
                    correct: 1
                },
                {
                    passage: "Every day after school and chores, Billy would spend hours working with his dogs, teaching them to track scents and follow trails.",
                    question: "What did Billy teach his dogs after basic commands?",
                    options: ["How to read", "To track scents and follow trails", "To do math", "To sing songs"],
                    correct: 1
                }
            ],
            7: [ // Chapter 8: The First Hunt
                {
                    passage: "After months of training, Billy decided his dogs were ready for their first real raccoon hunt. He was nervous but excited.",
                    question: "How did Billy feel about the first real hunt?",
                    options: ["Only scared", "Nervous but excited", "Completely confident", "Not interested"],
                    correct: 1
                },
                {
                    passage: "Billy waited until night because raccoons are nocturnal animals that come out to hunt and feed in the darkness.",
                    question: "Why did Billy wait until night to hunt?",
                    options: ["He liked the dark", "Raccoons are nocturnal and come out at night", "His parents made him wait", "It was cooler at night"],
                    correct: 1
                },
                {
                    passage: "Old Dan and Little Ann picked up a raccoon scent almost immediately and began following the trail through the forest.",
                    question: "What did the dogs do when they started hunting?",
                    options: ["They got lost", "They picked up a raccoon scent and followed it", "They went home", "They fell asleep"],
                    correct: 1
                },
                {
                    passage: "The dogs treed their first raccoon in a tall oak tree. Billy was amazed at how well his training had worked.",
                    question: "Where did the dogs tree their first raccoon?",
                    options: ["In a cave", "In a tall oak tree", "Under a rock", "In the house"],
                    correct: 1
                },
                {
                    passage: "Billy felt proud and happy that his dogs had succeeded on their first hunt. All his hard work and patience had paid off.",
                    question: "How did Billy feel after the successful first hunt?",
                    options: ["Disappointed", "Proud and happy", "Confused", "Angry"],
                    correct: 1
                }
            ],
            8: [ // Chapter 9: The Ghost Coon
                {
                    passage: "Billy heard stories about a legendary raccoon called the 'Ghost Coon' that no dog had ever been able to catch.",
                    question: "What was special about the Ghost Coon?",
                    options: ["It was white", "No dog had ever been able to catch it", "It was very large", "It lived in town"],
                    correct: 1
                },
                {
                    passage: "The Ghost Coon got its name because it seemed to disappear mysteriously whenever dogs got close to catching it.",
                    question: "Why was it called the Ghost Coon?",
                    options: ["It was transparent", "It seemed to disappear mysteriously", "It made scary noises", "It lived in a haunted house"],
                    correct: 1
                },
                {
                    passage: "Many experienced hunters had tried to catch the Ghost Coon with their best dogs, but all had failed.",
                    question: "Who had tried to catch the Ghost Coon before?",
                    options: ["Only children", "Many experienced hunters with their best dogs", "No one", "Just Billy"],
                    correct: 1
                },
                {
                    passage: "Billy became determined to prove that Old Dan and Little Ann were good enough to catch the legendary Ghost Coon.",
                    question: "What did Billy want to prove?",
                    options: ["That he was brave", "That Old Dan and Little Ann could catch the Ghost Coon", "That ghosts were real", "That he was the best hunter"],
                    correct: 1
                },
                {
                    passage: "The challenge of catching the Ghost Coon excited Billy because it would test his dogs' skills against the ultimate opponent.",
                    question: "Why was Billy excited about the Ghost Coon challenge?",
                    options: ["He was bored", "It would test his dogs against the ultimate opponent", "He wanted to become famous", "His friends dared him"],
                    correct: 1
                }
            ],
            9: [ // Chapter 10: The Bet
                {
                    passage: "The Pritchard boys, Ruben and Rainie, heard about Billy's plan to catch the Ghost Coon and laughed at him.",
                    question: "How did the Pritchard boys react to Billy's plan?",
                    options: ["They supported him", "They laughed at him", "They ignored him", "They wanted to help"],
                    correct: 1
                },
                {
                    passage: "Ruben Pritchard made a bet with Billy. If Billy's dogs could tree the Ghost Coon, Ruben would pay him two dollars.",
                    question: "What was Ruben's bet with Billy?",
                    options: ["Billy would give Ruben money", "If Billy's dogs could tree the Ghost Coon, Ruben would pay two dollars", "They would share the raccoon", "The loser would leave town"],
                    correct: 1
                },
                {
                    passage: "Billy accepted the bet confidently because he believed in his dogs' abilities, even though two dollars was a lot of money.",
                    question: "Why did Billy accept the bet?",
                    options: ["He needed the money badly", "He believed in his dogs' abilities", "He was afraid to say no", "His grandfather told him to"],
                    correct: 1
                },
                {
                    passage: "The Pritchard boys brought their own dog to compete against Old Dan and Little Ann in finding the Ghost Coon.",
                    question: "What did the Pritchard boys bring to the competition?",
                    options: ["More money", "Their own dog", "Weapons", "Food"],
                    correct: 1
                },
                {
                    passage: "That night, both teams of dogs set out into the forest to try to find and tree the legendary Ghost Coon.",
                    question: "What did both teams of dogs do that night?",
                    options: ["Went home", "Set out to find and tree the Ghost Coon", "Got into a fight", "Went to sleep"],
                    correct: 1
                }
            ],
            10: [ // Chapter 11: The Sacred Tree
                {
                    passage: "Old Dan and Little Ann successfully tracked and treed the Ghost Coon in a large oak tree, winning the bet for Billy.",
                    question: "What did Old Dan and Little Ann accomplish?",
                    options: ["They got lost", "They successfully treed the Ghost Coon", "They gave up", "They fought with other dogs"],
                    correct: 1
                },
                {
                    passage: "During the excitement of the hunt, Ruben Pritchard fell on Billy's ax and was seriously injured.",
                    question: "What happened to Ruben Pritchard during the hunt?",
                    options: ["He won the bet", "He fell on Billy's ax and was seriously injured", "He caught the raccoon", "He ran away"],
                    correct: 1
                },
                {
                    passage: "Billy felt terrible about the accident and tried to help Ruben, even though they had been competing against each other.",
                    question: "How did Billy react to Ruben's accident?",
                    options: ["He was happy", "He felt terrible and tried to help", "He ignored it", "He blamed Ruben"],
                    correct: 1
                },
                {
                    passage: "The Ghost Coon was finally caught, but the victory felt hollow because of the tragedy that had occurred.",
                    question: "How did Billy feel about catching the Ghost Coon after the accident?",
                    options: ["Extremely happy", "The victory felt hollow because of the tragedy", "Proud and excited", "Ready to celebrate"],
                    correct: 1
                },
                {
                    passage: "Billy decided to let the Ghost Coon go free because winning didn't seem important anymore after someone got hurt.",
                    question: "What did Billy do with the Ghost Coon?",
                    options: ["Kept it as a pet", "Sold it for money", "Let it go free", "Gave it to the Pritchards"],
                    correct: 2
                }
            ],
            11: [ // Chapter 12: Championship Dreams
                {
                    passage: "Billy's grandfather told him about an annual coon hunting championship contest where the best hunters and dogs from all over competed.",
                    question: "What did Billy's grandfather tell him about?",
                    options: ["A dog show", "An annual coon hunting championship contest", "A county fair", "A school competition"],
                    correct: 1
                },
                {
                    passage: "The championship offered valuable prizes including money and trophies for the winning hunters and their dogs.",
                    question: "What did the championship offer as prizes?",
                    options: ["Only ribbons", "Money and trophies", "Free dog food", "Nothing valuable"],
                    correct: 1
                },
                {
                    passage: "Billy's grandfather believed that Old Dan and Little Ann were good enough to compete with the best hunting dogs in the region.",
                    question: "What did Billy's grandfather believe about Old Dan and Little Ann?",
                    options: ["They weren't ready to compete", "They were good enough to compete with the best", "They needed more training", "They were too young"],
                    correct: 1
                },
                {
                    passage: "Billy was excited about the possibility of entering the championship, but he knew the competition would be very tough.",
                    question: "How did Billy feel about entering the championship?",
                    options: ["Not interested", "Excited but knew it would be tough", "Completely confident", "Too scared to try"],
                    correct: 1
                },
                {
                    passage: "The entry fee for the championship was expensive, but Billy's grandfather offered to help pay for it.",
                    question: "Who offered to help Billy pay the entry fee?",
                    options: ["His parents", "His grandfather", "The Pritchard boys", "No one"],
                    correct: 1
                }
            ],
            12: [ // Chapter 13: Getting Ready
                {
                    passage: "Billy and his grandfather decided to enter Old Dan and Little Ann in the championship hunting contest.",
                    question: "What did Billy and his grandfather decide to do?",
                    options: ["Sell the dogs", "Enter the dogs in the championship contest", "Stop hunting", "Move away"],
                    correct: 1
                },
                {
                    passage: "Billy spent extra time training his dogs and making sure they were in perfect condition for the big competition.",
                    question: "How did Billy prepare for the championship?",
                    options: ["He didn't prepare", "He spent extra time training and conditioning his dogs", "He bought new equipment only", "He studied books"],
                    correct: 1
                },
                {
                    passage: "Billy's mother made him new clothes to wear to the championship because she wanted him to look respectable at the important event.",
                    question: "What did Billy's mother do to help him prepare?",
                    options: ["Nothing", "Made him new clothes", "Gave him money", "Trained the dogs"],
                    correct: 1
                },
                {
                    passage: "Billy's father was proud of his son's dedication and hard work with the dogs, even though he had initially been skeptical.",
                    question: "How did Billy's father feel about Billy's dedication?",
                    options: ["Still skeptical", "Proud of Billy's hard work", "Angry and disappointed", "Completely indifferent"],
                    correct: 1
                },
                {
                    passage: "The whole family began to get excited about the championship and the possibility of Billy and his dogs winning.",
                    question: "How did Billy's family feel about the championship?",
                    options: ["They were against it", "The whole family got excited", "Only Billy cared", "They were worried"],
                    correct: 1
                }
            ],
            13: [ // Chapter 14: The Competition
                {
                    passage: "Billy and his family traveled to the championship contest, where they saw many experienced hunters with their prize-winning dogs.",
                    question: "What did Billy see at the championship contest?",
                    options: ["Only beginners", "Many experienced hunters with prize-winning dogs", "No other competitors", "Only children"],
                    correct: 1
                },
                {
                    passage: "Billy felt nervous when he saw the other competitors because their dogs looked so professional and well-trained.",
                    question: "How did Billy feel when he saw the other competitors?",
                    options: ["Completely confident", "Nervous because their dogs looked professional", "Excited and happy", "Ready to quit"],
                    correct: 1
                },
                {
                    passage: "The contest rules were explained: teams would hunt for three nights, and the team that caught the most raccoons would win.",
                    question: "What were the contest rules?",
                    options: ["One night of hunting", "Three nights of hunting; most raccoons caught wins", "A race around a track", "A dog show"],
                    correct: 1
                },
                {
                    passage: "Billy's grandfather encouraged him by reminding him that Old Dan and Little Ann had natural hunting instincts and great teamwork.",
                    question: "How did Billy's grandfather encourage him?",
                    options: ["He said the competition was easy", "He reminded Billy his dogs had natural instincts and teamwork", "He offered money", "He said winning didn't matter"],
                    correct: 1
                },
                {
                    passage: "As the first night of competition began, Billy felt both nervous and excited to see how his dogs would perform against the best.",
                    question: "How did Billy feel as the competition began?",
                    options: ["Only nervous", "Both nervous and excited", "Completely calm", "Ready to go home"],
                    correct: 1
                }
            ],
            14: [ // Chapter 15: Night of Champions
                {
                    passage: "On the first night of competition, Old Dan and Little Ann worked perfectly together and caught more raccoons than most other teams.",
                    question: "How did Old Dan and Little Ann perform on the first night?",
                    options: ["They performed poorly", "They worked perfectly and caught more raccoons than most teams", "They got lost", "They refused to hunt"],
                    correct: 1
                },
                {
                    passage: "The other hunters began to notice Billy's young dogs and were impressed by their skill and determination.",
                    question: "What did other hunters think of Billy's dogs?",
                    options: ["They thought they were too young", "They were impressed by their skill and determination", "They ignored them", "They were jealous"],
                    correct: 1
                },
                {
                    passage: "By the second night, Old Dan and Little Ann had moved into first place in the competition, surprising everyone.",
                    question: "What happened by the second night of competition?",
                    options: ["Billy quit", "Old Dan and Little Ann moved into first place", "They fell behind", "The contest was cancelled"],
                    correct: 1
                },
                {
                    passage: "On the final night, the competition was very close, but Old Dan and Little Ann's teamwork gave them the advantage they needed.",
                    question: "What gave Old Dan and Little Ann the advantage on the final night?",
                    options: ["Luck", "Their teamwork", "Bigger size", "Better equipment"],
                    correct: 1
                },
                {
                    passage: "When the final count was made, Billy's dogs had won the championship by catching the most raccoons over the three nights.",
                    question: "What was the final result of the championship?",
                    options: ["Billy came in second", "Billy's dogs won the championship", "There was a tie", "Billy quit before the end"],
                    correct: 1
                }
            ],
            15: [ // Chapter 16: Victory and Prizes
                {
                    passage: "Billy couldn't believe that Old Dan and Little Ann had actually won the championship hunting contest. His dream had come true.",
                    question: "How did Billy feel about winning the championship?",
                    options: ["Disappointed", "He couldn't believe his dream had come true", "Angry", "Indifferent"],
                    correct: 1
                },
                {
                    passage: "The prizes included a large cash award, beautiful trophies, and a championship medal that Billy would treasure forever.",
                    question: "What prizes did Billy win?",
                    options: ["Only a ribbon", "Cash, trophies, and a championship medal", "Nothing valuable", "Just dog food"],
                    correct: 1
                },
                {
                    passage: "Billy's family was incredibly proud of him and his dogs. His father said it was the proudest day of his life.",
                    question: "How did Billy's family react to his victory?",
                    options: ["They were embarrassed", "They were incredibly proud", "They didn't care", "They were surprised he won"],
                    correct: 1
                },
                {
                    passage: "With the prize money, Billy's family could afford things they had never been able to buy before.",
                    question: "What did the prize money allow Billy's family to do?",
                    options: ["Nothing different", "Afford things they had never been able to buy", "Move away", "Buy more dogs"],
                    correct: 1
                },
                {
                    passage: "Billy realized that the real prize wasn't the money or trophies, but the bond he had developed with Old Dan and Little Ann.",
                    question: "What did Billy realize was the real prize?",
                    options: ["The money", "The bond with Old Dan and Little Ann", "The trophies", "The fame"],
                    correct: 1
                }
            ],
            16: [ // Chapter 17: The Mountain Lion
                {
                    passage: "During a hunt in the mountains, Old Dan and Little Ann picked up the scent of a huge mountain lion instead of a raccoon.",
                    question: "What did the dogs pick up the scent of during their mountain hunt?",
                    options: ["A raccoon", "A huge mountain lion", "A deer", "Another dog"],
                    correct: 1
                },
                {
                    passage: "Billy knew that mountain lions were extremely dangerous and much more powerful than any raccoon his dogs had ever hunted.",
                    question: "What did Billy know about mountain lions?",
                    options: ["They were harmless", "They were extremely dangerous and powerful", "They were small", "They were friendly"],
                    correct: 1
                },
                {
                    passage: "Despite the danger, Old Dan and Little Ann were determined to tree the mountain lion, showing incredible courage.",
                    question: "How did Old Dan and Little Ann react to the mountain lion?",
                    options: ["They ran away", "They were determined to tree it, showing courage", "They hid", "They ignored it"],
                    correct: 1
                },
                {
                    passage: "Billy tried to call his dogs back, but they were so focused on the hunt that they ignored his commands.",
                    question: "What happened when Billy tried to call his dogs back?",
                    options: ["They came immediately", "They ignored his commands because they were focused", "They got angry", "They got confused"],
                    correct: 1
                },
                {
                    passage: "The mountain lion was much larger and more dangerous than anything Billy had ever encountered, and he began to fear for his dogs' safety.",
                    question: "How did Billy feel about the mountain lion encounter?",
                    options: ["Excited", "He began to fear for his dogs' safety", "Confident", "Bored"],
                    correct: 1
                }
            ],
            17: [ // Chapter 18: The Battle
                {
                    passage: "The mountain lion attacked Old Dan and Little Ann when they cornered it. Billy watched in horror as the fierce battle began.",
                    question: "What happened when the dogs cornered the mountain lion?",
                    options: ["It ran away", "It attacked the dogs and a fierce battle began", "It surrendered", "Nothing happened"],
                    correct: 1
                },
                {
                    passage: "Old Dan fought with incredible bravery, trying to protect Little Ann from the mountain lion's claws and teeth.",
                    question: "How did Old Dan fight in the battle?",
                    options: ["He was cowardly", "With incredible bravery, protecting Little Ann", "He ran away immediately", "He was confused"],
                    correct: 1
                },
                {
                    passage: "Billy tried to help his dogs by throwing rocks and shouting, but the mountain lion was too powerful and dangerous.",
                    question: "How did Billy try to help his dogs?",
                    options: ["He did nothing", "By throwing rocks and shouting", "He called for help", "He used a gun"],
                    correct: 1
                },
                {
                    passage: "Little Ann was badly injured during the fight, but she continued to help Old Dan despite her wounds.",
                    question: "What happened to Little Ann during the fight?",
                    options: ["She was unharmed", "She was badly injured but continued fighting", "She escaped safely", "She gave up immediately"],
                    correct: 1
                },
                {
                    passage: "After a long and terrible battle, Old Dan and Little Ann finally defeated the mountain lion, but both dogs were seriously hurt.",
                    question: "What was the outcome of the battle?",
                    options: ["The mountain lion won", "The dogs defeated the mountain lion but were seriously hurt", "Everyone ran away", "Billy defeated the mountain lion"],
                    correct: 1
                }
            ],
            18: [ // Chapter 19: Farewell
                {
                    passage: "Old Dan's injuries from the mountain lion fight were too severe, and despite Billy's care, the brave dog died from his wounds.",
                    question: "What happened to Old Dan after the mountain lion fight?",
                    options: ["He recovered completely", "He died from his severe injuries", "He ran away", "He was taken to a vet"],
                    correct: 1
                },
                {
                    passage: "Billy was heartbroken over Old Dan's death. He had never felt such deep sadness and loss before in his young life.",
                    question: "How did Billy feel about Old Dan's death?",
                    options: ["He was happy", "He was heartbroken and felt deep sadness", "He didn't care", "He was angry"],
                    correct: 1
                },
                {
                    passage: "Little Ann was also devastated by the loss of Old Dan. She had never been without her hunting partner and best friend.",
                    question: "How did Little Ann react to Old Dan's death?",
                    options: ["She was excited", "She was devastated by the loss", "She ignored it", "She found a new partner"],
                    correct: 1
                },
                {
                    passage: "Billy buried Old Dan on a hillside overlooking their favorite hunting grounds, marking the grave with a pile of stones.",
                    question: "Where did Billy bury Old Dan?",
                    options: ["In the backyard", "On a hillside overlooking their hunting grounds", "In the forest", "Near the house"],
                    correct: 1
                },
                {
                    passage: "After Old Dan's death, Little Ann refused to eat and seemed to lose her will to live without her companion.",
                    question: "What happened to Little Ann after Old Dan died?",
                    options: ["She became happier", "She refused to eat and lost her will to live", "She found a new friend", "She ran away"],
                    correct: 1
                }
            ],
            19: [ // Chapter 20: The Red Fern
                {
                    passage: "Little Ann died of a broken heart just a few days after Old Dan, unable to live without her lifelong hunting partner.",
                    question: "What happened to Little Ann a few days after Old Dan died?",
                    options: ["She recovered and lived happily", "She died of a broken heart", "She found a new home", "She learned to hunt alone"],
                    correct: 1
                },
                {
                    passage: "Billy buried Little Ann next to Old Dan on the hillside, so the two faithful dogs could be together forever.",
                    question: "Where did Billy bury Little Ann?",
                    options: ["In a different place", "Next to Old Dan so they could be together forever", "In the town cemetery", "Near the river"],
                    correct: 1
                },
                {
                    passage: "Billy's family decided to move away from the mountains to town, where Billy could get a better education.",
                    question: "What did Billy's family decide to do?",
                    options: ["Stay in the same place", "Move to town for Billy's education", "Buy more dogs", "Move to a farm"],
                    correct: 1
                },
                {
                    passage: "Before leaving, Billy visited his dogs' graves one last time to say goodbye to Old Dan and Little Ann.",
                    question: "What did Billy do before leaving?",
                    options: ["Nothing special", "Visited his dogs' graves one last time", "Sold his hunting equipment", "Forgot about his dogs"],
                    correct: 1
                },
                {
                    passage: "When Billy arrived at the grave site, he discovered something miraculous - a beautiful red fern had grown between the two graves, something that was said to be a sign of love and devotion.",
                    question: "What did Billy discover at the grave site?",
                    options: ["The graves were empty", "A beautiful red fern had grown between the graves", "Other dogs were there", "Nothing had changed"],
                    correct: 1
                }
            ]
        };

        // Ï†ÑÏó≠ Î≥ÄÏàò
        let currentChapterIndex = 0;
        let currentQuestionIndex = 0;
        let userAnswers = [];
        let questions = [];
        let currentAudio = null;
        let playbackSpeed = 1.0;

        // üéß ÏûêÎèô Ïò§ÎîîÏò§ URL ÏÉùÏÑ± Ìï®Ïàò
        function getAudioUrl(chapterIndex) {
            const level = 'level3';
            const bookId = 'WRFG001';
            const chapterNum = String(chapterIndex + 1).padStart(2, '0');
            
            const possibleFileNames = [
                `${bookId}_chapter${chapterNum}.mp3`,
                `${bookId}_ch${chapterNum}.mp3`,
                `${bookId}_${chapterNum}.mp3`,
                `red_fern_grows_chapter${chapterNum}.mp3`,
                `red_fern_grows_ch${chapterNum}.mp3`,
                `where_red_fern_grows_${chapterNum}.mp3`,
                `wilson_rawls_red_fern_chapter${chapterNum}.mp3`,
                `${bookId}.mp3`
            ];
            
            return {
                primary: `${AUDIO_BASE_URL}${level}/${possibleFileNames[0]}`,
                alternatives: possibleFileNames.map(fileName => `${AUDIO_BASE_URL}${level}/${fileName}`)
            };
        }

        // üéß Ïò§ÎîîÏò§ Ïû¨ÏÉù Ìï®Ïàò
        function playChapterAudio(chapterIndex) {
            const chapter = bookData.chapterList[chapterIndex];
            const audioUrls = getAudioUrl(chapterIndex);

            document.getElementById('audio-modal').style.display = 'flex';
            document.getElementById('audio-chapter-title').textContent = `Chapter ${chapterIndex + 1}: ${chapter.title}`;
            document.getElementById('audio-chapter-subtitle').textContent = `${bookData.title} - ${bookData.author}`;

            // Ïò§ÎîîÏò§ Ï†ïÎ≥¥ ÏòÅÏó≠ Îã§Ïãú Î≥¥Ïù¥Í∏∞ (ÏÉàÎ°úÏö¥ Ïò§ÎîîÏò§ ÌîåÎ†àÏù¥Ïãú)
            document.getElementById('audio-info').classList.remove('hidden');

            const audioPlayer = document.getElementById('audio-player');
            const audioSource = document.getElementById('audio-source');
            const audioStatus = document.getElementById('audio-status');

            audioStatus.textContent = 'üîÑ Ïò§ÎîîÏò§ ÌååÏùºÏùÑ Ï∞æÎäî Ï§ë...';

            function tryLoadAudio(urlIndex = 0) {
                if (urlIndex >= audioUrls.alternatives.length) {
                    audioStatus.innerHTML = `‚ùå Ïò§ÎîîÏò§ ÌååÏùºÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.`;
                    return;
                }

                const currentUrl = audioUrls.alternatives[urlIndex];
                audioSource.src = currentUrl;
                audioPlayer.load();

                const successHandler = function() {
                    const startTime = chapter.startTime || 0;
                    audioPlayer.currentTime = startTime;
                    audioStatus.innerHTML = `‚úÖ Ïò§ÎîîÏò§ Ï§ÄÎπÑ ÏôÑÎ£å!`;
                };

                const errorHandler = function() {
                    setTimeout(() => tryLoadAudio(urlIndex + 1), 100);
                };

                audioPlayer.addEventListener('canplaythrough', successHandler, { once: true });
                audioPlayer.addEventListener('error', errorHandler, { once: true });
            }

            tryLoadAudio(0);
            currentAudio = audioPlayer;
            playbackSpeed = 1.0;
        }

        // Í∏∞Î≥∏ Ìï®ÏàòÎì§
        function closeAudioModal() {
            document.getElementById('audio-modal').style.display = 'none';
            if (currentAudio) currentAudio.pause();
        }

        function togglePlayPause() {
            if (!currentAudio) return;
            if (currentAudio.paused) {
                currentAudio.play();
                document.querySelector('.play-pause-btn').textContent = '‚è∏Ô∏è ÏùºÏãúÏ†ïÏßÄ';
            } else {
                currentAudio.pause();
                document.querySelector('.play-pause-btn').textContent = '‚ñ∂Ô∏è Ïû¨ÏÉù';
            }
        }

        function changeSpeed() {
            if (!currentAudio) return;
            const speeds = [0.5, 0.75, 1.0, 1.25, 1.5, 2.0];
            const currentIndex = speeds.indexOf(playbackSpeed);
            playbackSpeed = speeds[(currentIndex + 1) % speeds.length];
            currentAudio.playbackRate = playbackSpeed;
            document.querySelector('.speed-btn').textContent = `${playbackSpeed}x`;
        }

        function resetToChapterStart() {
            if (!currentAudio) return;
            const currentChapter = parseInt(document.getElementById('audio-chapter-title').textContent.match(/Chapter (\d+)/)[1]) - 1;
            currentAudio.currentTime = bookData.chapterList[currentChapter]?.startTime || 0;
        }

        function downloadAudio() {
            const audioSource = document.getElementById('audio-source');
            if (audioSource.src) {
                const link = document.createElement('a');
                link.href = audioSource.src;
                link.download = `${document.getElementById('audio-chapter-title').textContent}.mp3`;
                link.click();
            }
        }

        // Ï±Ö ÏÉÅÏÑ∏ Ï†ïÎ≥¥ ÌëúÏãú
        function showBookDetail() {
            document.getElementById('book-detail-screen').style.display = 'block';
            document.getElementById('learning-screen').style.display = 'none';
            document.getElementById('result-screen').style.display = 'none';
            generateChapterGrid();
            updateProgress();
        }

        // Ï±ïÌÑ∞ Í∑∏Î¶¨Îìú ÏÉùÏÑ±
        function generateChapterGrid() {
            const grid = document.getElementById('chapters-grid');
            grid.innerHTML = '';

            bookData.chapterList.forEach((chapter, index) => {
                const chapterCard = document.createElement('div');
                chapterCard.className = `chapter-card ${chapter.status}`;

                chapterCard.innerHTML = `
                    <div class="chapter-header">
                        <div class="chapter-info">
                            <h4>Chapter ${index + 1}: ${chapter.title}</h4>
                            <p>${chapter.description} (${chapter.questionCount}Î¨∏Ï†ú)</p>
                        </div>
                        <div class="chapter-status ${chapter.status}">
                            ${chapter.status === 'completed' ? '‚úÖ ÏôÑÎ£å' :
                              chapter.status === 'current' ? 'üìñ ÏßÑÌñâÏ§ë' : 'üîí Ïû†ÍπÄ'}
                        </div>
                    </div>
                    <div class="chapter-actions">
                        <button class="chapter-btn audio-btn" onclick="playChapterAudio(${index})"
                                ${chapter.status === 'locked' ? 'disabled' : ''}>
                            üéß Ïò§ÎîîÏò§
                        </button>
                        <button class="chapter-btn quiz-btn" onclick="startLearning(${index})"
                                ${chapter.status === 'locked' ? 'disabled' : ''}>
                            üìù Î¨∏Ï†úÌíÄÍ∏∞
                        </button>
                    </div>
                `;

                grid.appendChild(chapterCard);
            });
        }

        // ÏßÑÎèÑ ÏóÖÎç∞Ïù¥Ìä∏
        function updateProgress() {
            const completedChapters = bookData.chapterList.filter(chapter => chapter.status === 'completed').length;
            const progress = Math.round((completedChapters / bookData.chapters) * 100);
            document.getElementById('progress-value').textContent = progress + '%';
        }

        // ÌïôÏäµ ÏãúÏûë
        function startLearning(chapterIndex) {
            currentChapterIndex = chapterIndex;
            currentQuestionIndex = 0;
            userAnswers = [];
            questions = questionsData[chapterIndex];

            if (!questions || questions.length === 0) {
                alert('Ïù¥ Ï±ïÌÑ∞Ïùò Î¨∏Ï†úÍ∞Ä ÏïÑÏßÅ Ï§ÄÎπÑÎêòÏßÄ ÏïäÏïòÏäµÎãàÎã§.');
                return;
            }

            document.getElementById('book-detail-screen').style.display = 'none';
            document.getElementById('learning-screen').style.display = 'block';
            document.getElementById('result-screen').style.display = 'none';

            const chapter = bookData.chapterList[chapterIndex];
            document.getElementById('learning-title').textContent = `Chapter ${chapterIndex + 1}: ${chapter.title}`;
            document.getElementById('learning-chapter-breadcrumb').textContent = `Chapter ${chapterIndex + 1}`;

            showQuestion();
            updateLearningProgress();
        }

        // Î¨∏Ï†ú ÌëúÏãú
        function showQuestion() {
            const question = questions[currentQuestionIndex];
            const container = document.getElementById('question-container');

            container.innerHTML = `
                <div class="question-text">Î¨∏Ï†ú ${currentQuestionIndex + 1}</div>
                <div class="passage">${question.passage}</div>
                <div class="question-text">${question.question}</div>
                <div class="options">
                    ${question.options.map((option, index) =>
                        `<div class="option" onclick="selectOption(${index})" data-index="${index}">
                            ${String.fromCharCode(65 + index)}. ${option}
                        </div>`
                    ).join('')}
                </div>
            `;

            if (userAnswers[currentQuestionIndex] !== undefined) {
                const selectedOption = container.querySelector(`[data-index="${userAnswers[currentQuestionIndex]}"]`);
                if (selectedOption) selectedOption.classList.add('selected');
            }

            updateNavigationButtons();
        }

        // ÏÑ†ÌÉùÏßÄ ÏÑ†ÌÉù
        function selectOption(optionIndex) {
            document.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
            document.querySelector(`[data-index="${optionIndex}"]`).classList.add('selected');
            userAnswers[currentQuestionIndex] = optionIndex;
            updateNavigationButtons();
        }

        // ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò
        function nextQuestion() {
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                showQuestion();
                updateLearningProgress();
            }
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                showQuestion();
                updateLearningProgress();
            }
        }

        function updateLearningProgress() {
            const progress = ((currentQuestionIndex + 1) / questions.length) * 100;
            document.getElementById('learning-progress-bar').style.width = progress + '%';
            document.getElementById('learning-progress-text').textContent = `Î¨∏Ï†ú ${currentQuestionIndex + 1} / ${questions.length}`;
        }

        function updateNavigationButtons() {
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            const submitBtn = document.getElementById('submit-btn');

            prevBtn.disabled = currentQuestionIndex === 0;

            if (currentQuestionIndex === questions.length - 1) {
                nextBtn.style.display = 'none';
                submitBtn.style.display = 'block';
                submitBtn.disabled = userAnswers[currentQuestionIndex] === undefined;
            } else {
                nextBtn.style.display = 'block';
                submitBtn.style.display = 'none';
                nextBtn.disabled = userAnswers[currentQuestionIndex] === undefined;
            }
        }

        // ÎãµÏïà Ï†úÏ∂ú
        function submitAnswers() {
            let correctCount = 0;
            questions.forEach((question, index) => {
                if (userAnswers[index] === question.correct) correctCount++;
            });

            const score = Math.round((correctCount / questions.length) * 100);

            if (score >= 70) {
                bookData.chapterList[currentChapterIndex].status = 'completed';
                if (currentChapterIndex < bookData.chapterList.length - 1) {
                    bookData.chapterList[currentChapterIndex + 1].status = 'current';
                }
            }

            showResults(correctCount, questions.length, score);
        }

        // Í≤∞Í≥º ÌëúÏãú
        function showResults(correct, total, score) {
            document.getElementById('learning-screen').style.display = 'none';
            document.getElementById('result-screen').style.display = 'block';

            document.getElementById('score-circle').textContent = score + '%';
            document.getElementById('total-questions').textContent = total + 'Î¨∏Ï†ú';
            document.getElementById('correct-answers').textContent = correct + 'Î¨∏Ï†ú';
            document.getElementById('wrong-answers').textContent = (total - correct) + 'Î¨∏Ï†ú';
            document.getElementById('final-score').textContent = score + 'Ï†ê';

            let message = '';
            if (score >= 90) message = 'ÌõåÎ•≠Ìï©ÎãàÎã§! üåü';
            else if (score >= 80) message = 'ÏûòÌñàÏñ¥Ïöî! üëè';
            else if (score >= 70) message = 'Ï¢ãÏïÑÏöî! üëç';
            else message = 'Îã§Ïãú ÌïúÎ≤à ÎèÑÏ†ÑÌï¥Î≥¥ÏÑ∏Ïöî! üí™';

            document.getElementById('result-message').textContent = message;
        }

        function retryChapter() {
            startLearning(currentChapterIndex);
        }

        function nextChapter() {
            if (currentChapterIndex < bookData.chapterList.length - 1) {
                startLearning(currentChapterIndex + 1);
            } else {
                alert('Î™®Îì† Ï±ïÌÑ∞Î•º ÏôÑÎ£åÌñàÏäµÎãàÎã§! üéâ');
                showBookDetail();
            }
        }

        // ÌéòÏù¥ÏßÄ Î°úÎìú
        window.addEventListener('load', function() {
            showBookDetail();
            console.log('üéØ Where the Red Fern Grows ÌïôÏäµ ÏãúÏä§ÌÖúÏù¥ Ï§ÄÎπÑÎêòÏóàÏäµÎãàÎã§!');
        });

        // Î™®Îã¨ Ïô∏Î∂Ä ÌÅ¥Î¶≠Ïãú Îã´Í∏∞
        document.getElementById('audio-modal').addEventListener('click', function(e) {
            if (e.target === this) closeAudioModal();
        });
    </script>
</body>
</html>