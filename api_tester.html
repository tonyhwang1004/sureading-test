<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ” API ì—°ê²° ìƒíƒœ í…ŒìŠ¤í„° - ìˆ˜ë¦¬ë”©ì–´í•™ì›</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            backdrop-filter: blur(20px);
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1rem;
            color: #666;
            margin-bottom: 30px;
        }

        .test-controls {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            color: white;
            font-size: 0.9rem;
        }

        .btn.primary {
            background: linear-gradient(45deg, #667eea, #764ba2);
        }

        .btn.primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .btn.success {
            background: linear-gradient(45deg, #48bb78, #38a169);
        }

        .btn.success:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(72, 187, 120, 0.3);
        }

        .btn.warning {
            background: linear-gradient(45deg, #ed8936, #dd6b20);
        }

        .btn.warning:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(237, 137, 54, 0.3);
        }

        .status-overview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .status-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .status-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.15);
        }

        .status-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }

        .status-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 10px;
        }

        .status-value {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .status-value.success { color: #48bb78; }
        .status-value.error { color: #f56565; }
        .status-value.pending { color: #ed8936; }

        .status-detail {
            font-size: 0.9rem;
            color: #666;
        }

        .api-tests {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .api-tests h2 {
            font-size: 1.5rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .test-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 15px 20px;
            margin-bottom: 10px;
            border-radius: 10px;
            background: #f8f9fa;
            transition: all 0.3s ease;
        }

        .test-item:hover {
            background: #e9ecef;
        }

        .test-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .test-method {
            background: #495057;
            color: white;
            padding: 4px 12px;
            border-radius: 6px;
            font-size: 0.8rem;
            font-weight: 600;
            min-width: 60px;
            text-align: center;
        }

        .test-method.get { background: #28a745; }
        .test-method.post { background: #007bff; }
        .test-method.put { background: #ffc107; color: #333; }
        .test-method.delete { background: #dc3545; }

        .test-endpoint {
            font-family: 'SF Mono', Monaco, 'Cascadia Code', monospace;
            background: white;
            padding: 8px 12px;
            border-radius: 6px;
            border: 1px solid #dee2e6;
            font-size: 0.9rem;
        }

        .test-description {
            color: #666;
            font-size: 0.9rem;
        }

        .test-status {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .status-indicator {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
        }

        .status-indicator.success {
            background: #d4edda;
            color: #155724;
        }

        .status-indicator.error {
            background: #f8d7da;
            color: #721c24;
        }

        .status-indicator.pending {
            background: #fff3cd;
            color: #856404;
        }

        .status-indicator.testing {
            background: #cce7ff;
            color: #004085;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .response-time {
            font-size: 0.8rem;
            color: #666;
            font-weight: 500;
        }

        .test-details {
            margin-top: 10px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            border-left: 4px solid #dee2e6;
            font-size: 0.9rem;
            display: none;
        }

        .test-details.show {
            display: block;
        }

        .test-details.success {
            border-left-color: #28a745;
            background: #f8fff9;
        }

        .test-details.error {
            border-left-color: #dc3545;
            background: #fffafa;
        }

        .console-output {
            background: #1a1a1a;
            color: #00ff00;
            padding: 20px;
            border-radius: 10px;
            font-family: 'SF Mono', Monaco, 'Cascadia Code', monospace;
            font-size: 0.9rem;
            line-height: 1.6;
            max-height: 400px;
            overflow-y: auto;
            margin-top: 30px;
        }

        .log-entry {
            margin-bottom: 5px;
        }

        .log-entry.success { color: #00ff00; }
        .log-entry.error { color: #ff6b6b; }
        .log-entry.info { color: #74c0fc; }
        .log-entry.warning { color: #ffd43b; }

        .loading {
            display: none;
            text-align: center;
            padding: 40px;
            color: #666;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ” API ì—°ê²° ìƒíƒœ í…ŒìŠ¤í„°</h1>
            <p>ìˆ˜ë¦¬ë”©ì–´í•™ì› ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œì˜ ëª¨ë“  API ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤</p>
            
            <div class="test-controls">
                <button class="btn primary" onclick="testAllAPIs()">ğŸš€ ì „ì²´ API í…ŒìŠ¤íŠ¸</button>
                <button class="btn success" onclick="testCriticalAPIs()">âš¡ í•µì‹¬ APIë§Œ í…ŒìŠ¤íŠ¸</button>
                <button class="btn warning" onclick="clearResults()">ğŸ§¹ ê²°ê³¼ ì´ˆê¸°í™”</button>
            </div>
        </div>

        <!-- ìƒíƒœ ê°œìš” -->
        <div class="status-overview">
            <div class="status-card">
                <div class="status-icon">ğŸ¯</div>
                <div class="status-title">ì´ í…ŒìŠ¤íŠ¸</div>
                <div class="status-value pending" id="total-tests">0</div>
                <div class="status-detail">ê°œ API ì—”ë“œí¬ì¸íŠ¸</div>
            </div>
            
            <div class="status-card">
                <div class="status-icon">âœ…</div>
                <div class="status-title">ì„±ê³µ</div>
                <div class="status-value success" id="success-count">0</div>
                <div class="status-detail">ê°œ ì„±ê³µ</div>
            </div>
            
            <div class="status-card">
                <div class="status-icon">âŒ</div>
                <div class="status-title">ì‹¤íŒ¨</div>
                <div class="status-value error" id="error-count">0</div>
                <div class="status-detail">ê°œ ì‹¤íŒ¨</div>
            </div>
            
            <div class="status-card">
                <div class="status-icon">âš¡</div>
                <div class="status-title">í‰ê·  ì‘ë‹µì‹œê°„</div>
                <div class="status-value pending" id="avg-response-time">0ms</div>
                <div class="status-detail">ì‘ë‹µ ì†ë„</div>
            </div>
        </div>

        <!-- API í…ŒìŠ¤íŠ¸ ëª©ë¡ -->
        <div class="api-tests">
            <h2>ğŸ“¡ API ì—”ë“œí¬ì¸íŠ¸ í…ŒìŠ¤íŠ¸ ê²°ê³¼</h2>
            
            <div id="loading" class="loading">
                <div class="spinner"></div>
                <p>API í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰ ì¤‘ì…ë‹ˆë‹¤...</p>
            </div>

            <div id="api-test-list">
                <!-- API í…ŒìŠ¤íŠ¸ ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
            </div>

            <!-- ì½˜ì†” ì¶œë ¥ -->
            <div class="console-output" id="console-output">
                <div class="log-entry info">[INFO] API ì—°ê²° í…ŒìŠ¤í„°ê°€ ì¤€ë¹„ë˜ì—ˆìŠµë‹ˆë‹¤.</div>
                <div class="log-entry info">[INFO] 'ì „ì²´ API í…ŒìŠ¤íŠ¸' ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ ì‹œì‘í•˜ì„¸ìš”.</div>
            </div>
        </div>
    </div>

    <script>
        // í…ŒìŠ¤íŠ¸í•  API ì—”ë“œí¬ì¸íŠ¸ ëª©ë¡
        const apiEndpoints = [
            {
                method: 'GET',
                endpoint: '/api/admin/dashboard/stats',
                description: 'ëŒ€ì‹œë³´ë“œ í†µê³„ ë°ì´í„°',
                critical: true,
                expectedFields: ['total_students', 'total_books', 'total_sessions', 'avg_accuracy']
            },
            {
                method: 'GET',
                endpoint: '/api/admin/dashboard/chart-data?period=7d',
                description: 'ì°¨íŠ¸ ë°ì´í„° (7ì¼)',
                critical: true,
                expectedFields: ['activity_chart', 'level_distribution']
            },
            {
                method: 'GET',
                endpoint: '/api/admin/students',
                description: 'í•™ìƒ ëª©ë¡',
                critical: true,
                expectedFields: ['success', 'students']
            },
            {
                method: 'GET',
                endpoint: '/api/admin/books',
                description: 'ë„ì„œ ëª©ë¡',
                critical: true,
                expectedFields: ['success', 'books']
            },
            {
                method: 'GET',
                endpoint: '/api/admin/applications',
                description: 'íšŒì›ê°€ì… ì‹ ì²­ ëª©ë¡',
                critical: true,
                expectedFields: ['success', 'applications']
            },
            {
                method: 'GET',
                endpoint: '/api/admin/recent-activities?limit=10',
                description: 'ìµœê·¼ í•™ìŠµ í™œë™',
                critical: true,
                expectedFields: ['success', 'activities']
            },
            {
                method: 'GET',
                endpoint: '/api/session-status',
                description: 'ì„¸ì…˜ ìƒíƒœ í™•ì¸',
                critical: false,
                expectedFields: ['logged_in']
            },
            {
                method: 'GET',
                endpoint: '/api/health',
                description: 'ì„œë²„ ìƒíƒœ í™•ì¸',
                critical: false,
                expectedFields: ['status', 'timestamp']
            },
            {
                method: 'GET',
                endpoint: '/api/books',
                description: 'ì „ì²´ ë„ì„œ ëª©ë¡',
                critical: false,
                expectedFields: ['books', 'total']
            },
            {
                method: 'GET',
                endpoint: '/api/books/level/1',
                description: 'Level 1 ë„ì„œ ëª©ë¡',
                critical: false,
                expectedFields: ['level', 'books']
            }
        ];

        let testResults = [];
        let currentTestIndex = 0;

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        window.addEventListener('load', function() {
            initializeTestList();
            updateStatusCards();
            log('API ì—°ê²° í…ŒìŠ¤í„°ê°€ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.', 'info');
        });

        // í…ŒìŠ¤íŠ¸ ëª©ë¡ ì´ˆê¸°í™”
        function initializeTestList() {
            const testListContainer = document.getElementById('api-test-list');
            testListContainer.innerHTML = '';

            apiEndpoints.forEach((api, index) => {
                const testItem = document.createElement('div');
                testItem.className = 'test-item';
                testItem.innerHTML = `
                    <div class="test-info">
                        <div class="test-method ${api.method.toLowerCase()}">${api.method}</div>
                        <div class="test-endpoint">${api.endpoint}</div>
                        <div class="test-description">${api.description}</div>
                        ${api.critical ? '<span style="background: #ff6b6b; color: white; padding: 2px 8px; border-radius: 4px; font-size: 0.7rem; margin-left: 10px;">CRITICAL</span>' : ''}
                    </div>
                    <div class="test-status">
                        <div class="status-indicator pending" id="status-${index}">â³</div>
                        <div class="response-time" id="time-${index}">-</div>
                    </div>
                `;
                
                testItem.addEventListener('click', () => toggleTestDetails(index));
                testListContainer.appendChild(testItem);

                // ìƒì„¸ ì •ë³´ ì»¨í…Œì´ë„ˆ
                const detailsContainer = document.createElement('div');
                detailsContainer.className = 'test-details';
                detailsContainer.id = `details-${index}`;
                testListContainer.appendChild(detailsContainer);
            });

            document.getElementById('total-tests').textContent = apiEndpoints.length;
        }

        // ì „ì²´ API í…ŒìŠ¤íŠ¸
        async function testAllAPIs() {
            log('ğŸš€ ì „ì²´ API í…ŒìŠ¤íŠ¸ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤...', 'info');
            document.getElementById('loading').style.display = 'block';
            
            testResults = [];
            currentTestIndex = 0;
            
            for (let i = 0; i < apiEndpoints.length; i++) {
                await testSingleAPI(i);
                updateStatusCards();
            }
            
            document.getElementById('loading').style.display = 'none';
            log('âœ… ì „ì²´ API í…ŒìŠ¤íŠ¸ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
            generateSummaryReport();
        }

        // í•µì‹¬ APIë§Œ í…ŒìŠ¤íŠ¸
        async function testCriticalAPIs() {
            log('âš¡ í•µì‹¬ API í…ŒìŠ¤íŠ¸ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤...', 'info');
            document.getElementById('loading').style.display = 'block';
            
            testResults = [];
            currentTestIndex = 0;
            
            for (let i = 0; i < apiEndpoints.length; i++) {
                if (apiEndpoints[i].critical) {
                    await testSingleAPI(i);
                    updateStatusCards();
                }
            }
            
            document.getElementById('loading').style.display = 'none';
            log('âœ… í•µì‹¬ API í…ŒìŠ¤íŠ¸ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
            generateSummaryReport();
        }

        // ê°œë³„ API í…ŒìŠ¤íŠ¸
        async function testSingleAPI(index) {
            const api = apiEndpoints[index];
            const statusIndicator = document.getElementById(`status-${index}`);
            const timeElement = document.getElementById(`time-${index}`);
            const detailsElement = document.getElementById(`details-${index}`);

            // í…ŒìŠ¤íŠ¸ ì¤‘ ìƒíƒœë¡œ ë³€ê²½
            statusIndicator.className = 'status-indicator testing';
            statusIndicator.textContent = 'ğŸ”„';
            
            log(`[${api.method}] ${api.endpoint} í…ŒìŠ¤íŠ¸ ì¤‘...`, 'info');

            const startTime = performance.now();

            try {
                const response = await fetch(api.endpoint, {
                    method: api.method,
                    headers: {
                        'Content-Type': 'application/json',
                    },
                });

                const endTime = performance.now();
                const responseTime = Math.round(endTime - startTime);
                
                timeElement.textContent = `${responseTime}ms`;

                if (response.ok) {
                    const data = await response.json();
                    
                    // í•„ìˆ˜ í•„ë“œ ê²€ì¦
                    const missingFields = [];
                    if (api.expectedFields) {
                        api.expectedFields.forEach(field => {
                            if (!(field in data)) {
                                missingFields.push(field);
                            }
                        });
                    }

                    if (missingFields.length === 0) {
                        // ì„±ê³µ
                        statusIndicator.className = 'status-indicator success';
                        statusIndicator.textContent = 'âœ…';
                        
                        detailsElement.className = 'test-details success';
                        detailsElement.innerHTML = `
                            <strong>âœ… í…ŒìŠ¤íŠ¸ ì„±ê³µ</strong><br>
                            <strong>ì‘ë‹µ ì‹œê°„:</strong> ${responseTime}ms<br>
                            <strong>HTTP ìƒíƒœ:</strong> ${response.status} ${response.statusText}<br>
                            <strong>ì‘ë‹µ ë°ì´í„°:</strong><br>
                            <pre style="background: #f8f9fa; padding: 10px; border-radius: 5px; overflow-x: auto; margin-top: 10px;">${JSON.stringify(data, null, 2).substring(0, 500)}${JSON.stringify(data, null, 2).length > 500 ? '...' : ''}</pre>
                        `;

                        testResults.push({
                            index,
                            success: true,
                            responseTime,
                            status: response.status,
                            data
                        });

                        log(`âœ… [${api.method}] ${api.endpoint} - ì„±ê³µ (${responseTime}ms)`, 'success');
                    } else {
                        // í•„ë“œ ëˆ„ë½
                        statusIndicator.className = 'status-indicator error';
                        statusIndicator.textContent = 'âš ï¸';
                        
                        detailsElement.className = 'test-details error';
                        detailsElement.innerHTML = `
                            <strong>âš ï¸ í•„ë“œ ëˆ„ë½ ê°ì§€</strong><br>
                            <strong>ì‘ë‹µ ì‹œê°„:</strong> ${responseTime}ms<br>
                            <strong>HTTP ìƒíƒœ:</strong> ${response.status} ${response.statusText}<br>
                            <strong>ëˆ„ë½ëœ í•„ë“œ:</strong> ${missingFields.join(', ')}<br>
                            <strong>ì‹¤ì œ ì‘ë‹µ:</strong><br>
                            <pre style="background: #fff5f5; padding: 10px; border-radius: 5px; overflow-x: auto; margin-top: 10px;">${JSON.stringify(data, null, 2).substring(0, 500)}</pre>
                        `;

                        testResults.push({
                            index,
                            success: false,
                            responseTime,
                            status: response.status,
                            error: `í•„ìˆ˜ í•„ë“œ ëˆ„ë½: ${missingFields.join(', ')}`,
                            data
                        });

                        log(`âš ï¸ [${api.method}] ${api.endpoint} - í•„ë“œ ëˆ„ë½: ${missingFields.join(', ')}`, 'warning');
                    }
                } else {
                    // HTTP ì˜¤ë¥˜
                    statusIndicator.className = 'status-indicator error';
                    statusIndicator.textContent = 'âŒ';
                    
                    const errorText = await response.text();
                    
                    detailsElement.className = 'test-details error';
                    detailsElement.innerHTML = `
                        <strong>âŒ HTTP ì˜¤ë¥˜</strong><br>
                        <strong>ì‘ë‹µ ì‹œê°„:</strong> ${responseTime}ms<br>
                        <strong>HTTP ìƒíƒœ:</strong> ${response.status} ${response.statusText}<br>
                        <strong>ì˜¤ë¥˜ ë‚´ìš©:</strong><br>
                        <pre style="background: #fff5f5; padding: 10px; border-radius: 5px; overflow-x: auto; margin-top: 10px;">${errorText.substring(0, 500)}</pre>
                    `;

                    testResults.push({
                        index,
                        success: false,
                        responseTime,
                        status: response.status,
                        error: `HTTP ${response.status}: ${response.statusText}`
                    });

                    log(`âŒ [${api.method}] ${api.endpoint} - HTTP ${response.status}: ${response.statusText}`, 'error');
                }
            } catch (error) {
                // ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜
                const endTime = performance.now();
                const responseTime = Math.round(endTime - startTime);
                
                statusIndicator.className = 'status-indicator error';
                statusIndicator.textContent = 'ğŸ’¥';
                timeElement.textContent = 'Timeout';
                
                detailsElement.className = 'test-details error';
                detailsElement.innerHTML = `
                    <strong>ğŸ’¥ ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜</strong><br>
                    <strong>ì˜¤ë¥˜ ìœ í˜•:</strong> ${error.name}<br>
                    <strong>ì˜¤ë¥˜ ë©”ì‹œì§€:</strong> ${error.message}<br>
                    <strong>ê°€ëŠ¥í•œ ì›ì¸:</strong><br>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>ì„œë²„ê°€ ì‹¤í–‰ë˜ì§€ ì•ŠìŒ</li>
                        <li>API ì—”ë“œí¬ì¸íŠ¸ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŒ</li>
                        <li>CORS ì •ì±… ìœ„ë°˜</li>
                        <li>ë„¤íŠ¸ì›Œí¬ ì—°ê²° ë¬¸ì œ</li>
                    </ul>
                `;

                testResults.push({
                    index,
                    success: false,
                    responseTime,
                    error: error.message
                });

                log(`ğŸ’¥ [${api.method}] ${api.endpoint} - ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜: ${error.message}`, 'error');
            }
        }

        // ìƒíƒœ ì¹´ë“œ ì—…ë°ì´íŠ¸
        function updateStatusCards() {
            const successCount = testResults.filter(r => r.success).length;
            const errorCount = testResults.filter(r => !r.success).length;
            const totalTests = testResults.length;
            
            document.getElementById('success-count').textContent = successCount;
            document.getElementById('error-count').textContent = errorCount;
            
            if (totalTests > 0) {
                const avgResponseTime = Math.round(
                    testResults.reduce((sum, r) => sum + (r.responseTime || 0), 0) / totalTests
                );
                document.getElementById('avg-response-time').textContent = `${avgResponseTime}ms`;
            }
        }

        // í…ŒìŠ¤íŠ¸ ìƒì„¸ ì •ë³´ í† ê¸€
        function toggleTestDetails(index) {
            const detailsElement = document.getElementById(`details-${index}`);
            if (detailsElement.classList.contains('show')) {
                detailsElement.classList.remove('show');
            } else {
                // ëª¨ë“  ìƒì„¸ ì •ë³´ ë‹«ê¸°
                document.querySelectorAll('.test-details').forEach(el => {
                    el.classList.remove('show');
                });
                // ì„ íƒëœ ê²ƒë§Œ ì—´ê¸°
                detailsElement.classList.add('show');
            }
        }

        // ìš”ì•½ ë³´ê³ ì„œ ìƒì„±
        function generateSummaryReport() {
            const totalTests = testResults.length;
            const successCount = testResults.filter(r => r.success).length;
            const errorCount = testResults.filter(r => !r.success).length;
            const successRate = totalTests > 0 ? Math.round((successCount / totalTests) * 100) : 0;
            
            const criticalTests = testResults.filter((r, i) => apiEndpoints[i].critical);
            const criticalSuccessCount = criticalTests.filter(r => r.success).length;
            const criticalSuccessRate = criticalTests.length > 0 ? Math.round((criticalSuccessCount / criticalTests.length) * 100) : 0;

            log('', 'info');
            log('ğŸ“Š === í…ŒìŠ¤íŠ¸ ìš”ì•½ ë³´ê³ ì„œ ===', 'info');
            log(`ğŸ“‹ ì´ í…ŒìŠ¤íŠ¸: ${totalTests}ê°œ`, 'info');
            log(`âœ… ì„±ê³µ: ${successCount}ê°œ (${successRate}%)`, successCount === totalTests ? 'success' : 'info');
            log(`âŒ ì‹¤íŒ¨: ${errorCount}ê°œ`, errorCount === 0 ? 'info' : 'error');
            log(`ğŸ¯ í•µì‹¬ API ì„±ê³µë¥ : ${criticalSuccessRate}%`, criticalSuccessRate === 100 ? 'success' : 'warning');
            
            if (errorCount === 0) {
                log('ğŸ‰ ëª¨ë“  APIê°€ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•©ë‹ˆë‹¤!', 'success');
                log('âœ¨ í•˜ë“œì½”ë”© ì—†ì´ ì™„ì „í•œ ë°±ì—”ë“œ ì—°ë™ì´ í™•ì¸ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
            } else {
                log('âš ï¸ ì¼ë¶€ APIì— ë¬¸ì œê°€ ìˆìŠµë‹ˆë‹¤. ìƒì„¸ ì •ë³´ë¥¼ í™•ì¸í•˜ì„¸ìš”.', 'warning');
            }
            log('=================================', 'info');
        }

        // ê²°ê³¼ ì´ˆê¸°í™”
        function clearResults() {
            testResults = [];
            currentTestIndex = 0;
            
            // ëª¨ë“  ìƒíƒœ ì´ˆê¸°í™”
            for (let i = 0; i < apiEndpoints.length; i++) {
                const statusIndicator = document.getElementById(`status-${i}`);
                const timeElement = document.getElementById(`time-${i}`);
                const detailsElement = document.getElementById(`details-${i}`);
                
                statusIndicator.className = 'status-indicator pending';
                statusIndicator.textContent = 'â³';
                timeElement.textContent = '-';
                detailsElement.className = 'test-details';
                detailsElement.classList.remove('show');
                detailsElement.innerHTML = '';
            }
            
            updateStatusCards();
            
            // ì½˜ì†” ì´ˆê¸°í™”
            document.getElementById('console-output').innerHTML = `
                <div class="log-entry info">[INFO] í…ŒìŠ¤íŠ¸ ê²°ê³¼ê°€ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.</div>
                <div class="log-entry info">[INFO] ìƒˆë¡œìš´ í…ŒìŠ¤íŠ¸ë¥¼ ì‹œì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</div>
            `;
        }

        // ì½˜ì†” ë¡œê·¸
        function log(message, type = 'info') {
            const console = document.getElementById('console-output');
            const logEntry = document.createElement('div');
            logEntry.className = `log-entry ${type}`;
            
            const timestamp = new Date().toLocaleTimeString();
            const prefix = {
                'success': '[SUCCESS]',
                'error': '[ERROR]',
                'warning': '[WARNING]',
                'info': '[INFO]'
            }[type] || '[LOG]';
            
            logEntry.textContent = `${timestamp} ${prefix} ${message}`;
            console.appendChild(logEntry);
            console.scrollTop = console.scrollHeight;
        }
    </script>
</body>
</html>