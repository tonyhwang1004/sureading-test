<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Hunger Games - Level 5 - ìˆ˜ë¦¬ë”©ì–´í•™ì›</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #1a1a1a 0%, #4a4a4a 50%, #8B0000 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
        }

        /* í—¤ë” */
        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 25px 30px;
            margin-bottom: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(45deg, #1a1a1a, #8B0000);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
        }

        .logo-text h1 {
            font-size: 1.8rem;
            font-weight: 700;
            color: #333;
        }

        .logo-text p {
            font-size: 0.9rem;
            color: #666;
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
        }

        .nav-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            background: #f8f9fa;
            color: #333;
            text-decoration: none;
        }

        .nav-btn:hover {
            background: #1a1a1a;
            color: white;
            transform: translateY(-2px);
        }

        /* ë©”ì¸ ì½˜í…ì¸  ì˜ì—­ */
        .main-content {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            min-height: 600px;
        }

        /* ì±… ìƒì„¸ í™”ë©´ */
        .breadcrumb {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 30px;
            font-size: 0.9rem;
            color: #666;
        }

        .breadcrumb a {
            color: #1a1a1a;
            text-decoration: none;
            cursor: pointer;
        }

        .breadcrumb a:hover {
            text-decoration: underline;
        }

        .book-detail-header {
            display: flex;
            gap: 30px;
            margin-bottom: 40px;
            align-items: flex-start;
        }

        .detail-book-cover {
            width: 150px;
            height: 220px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 4rem;
            font-weight: bold;
            flex-shrink: 0;
            background: linear-gradient(45deg, #1a1a1a, #8B0000);
        }

        .book-info {
            flex: 1;
        }

        .book-info h2 {
            font-size: 2.2rem;
            font-weight: 700;
            color: #333;
            margin-bottom: 10px;
        }

        .book-info .author {
            font-size: 1.2rem;
            color: #1a1a1a;
            margin-bottom: 20px;
        }

        .book-summary {
            font-size: 1rem;
            color: #666;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .book-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .stat-box {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-box .value {
            font-size: 1.5rem;
            font-weight: 700;
            color: #1a1a1a;
        }

        .stat-box .label {
            font-size: 0.9rem;
            color: #666;
            margin-top: 5px;
        }

        /* ì±•í„° ê·¸ë¦¬ë“œ */
        .chapters-section {
            margin-top: 40px;
        }

        .chapters-section h3 {
            font-size: 1.8rem;
            font-weight: 700;
            color: #333;
            margin-bottom: 30px;
            text-align: center;
        }

        .part-header {
            font-size: 1.4rem;
            font-weight: 600;
            color: #8B0000;
            margin: 30px 0 20px 0;
            text-align: center;
            padding: 10px;
            background: rgba(139, 0, 0, 0.1);
            border-radius: 10px;
        }

        .chapters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .chapter-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            border: 2px solid transparent;
            position: relative;
        }

        .chapter-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .chapter-card.completed {
            border-color: #28a745;
            background: linear-gradient(135deg, #28a74508, #ffffff);
        }

        .chapter-card.current {
            border-color: #1a1a1a;
            background: linear-gradient(135deg, #1a1a1a08, #ffffff);
        }

        .chapter-card.locked {
            opacity: 0.6;
            background: #f8f9fa;
        }

        .chapter-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 20px;
        }

        .chapter-info h4 {
            font-size: 1.3rem;
            font-weight: 700;
            color: #333;
            margin-bottom: 8px;
        }

        .chapter-info p {
            font-size: 0.95rem;
            color: #666;
            line-height: 1.5;
        }

        .chapter-status {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .chapter-status.completed {
            background: rgba(40, 167, 69, 0.1);
            color: #28a745;
        }

        .chapter-status.current {
            background: rgba(26, 26, 26, 0.1);
            color: #1a1a1a;
        }

        .chapter-status.locked {
            background: rgba(108, 117, 125, 0.1);
            color: #6c757d;
        }

        .chapter-actions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 20px;
        }

        .chapter-btn {
            padding: 12px 16px;
            border: none;
            border-radius: 10px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .audio-btn {
            background: linear-gradient(45deg, #1a1a1a, #8B0000);
            color: white;
        }

        .quiz-btn {
            background: linear-gradient(45deg, #8B0000, #DC143C);
            color: white;
        }

        .chapter-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .chapter-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* í•™ìŠµ í™”ë©´ */
        .learning-screen {
            display: none;
        }

        .learning-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .learning-progress {
            background: #f8f9fa;
            border-radius: 10px;
            height: 8px;
            margin: 20px 0;
            overflow: hidden;
        }

        .learning-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #1a1a1a, #8B0000);
            transition: width 0.3s ease;
        }

        .question-container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        .question-text {
            font-size: 1.2rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 20px;
        }

        .passage {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            font-size: 1rem;
            line-height: 1.6;
            color: #444;
        }

        .options {
            display: grid;
            gap: 10px;
        }

        .option {
            background: #f8f9fa;
            border: 2px solid transparent;
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .option:hover {
            background: #e9ecef;
            border-color: #1a1a1a;
        }

        .option.selected {
            background: rgba(26, 26, 26, 0.1);
            border-color: #1a1a1a;
        }

        .learning-controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
        }

        .control-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .next-btn {
            background: linear-gradient(45deg, #1a1a1a, #8B0000);
            color: white;
        }

        .prev-btn {
            background: #6c757d;
            color: white;
        }

        .submit-btn {
            background: linear-gradient(45deg, #1a1a1a, #8B0000);
            color: white;
        }

        .control-btn:hover {
            transform: translateY(-2px);
        }

        .control-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* ê²°ê³¼ í™”ë©´ */
        .result-screen {
            display: none;
            text-align: center;
        }

        .score-circle {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: linear-gradient(45deg, #1a1a1a, #8B0000);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            color: white;
            font-size: 2rem;
            font-weight: bold;
        }

        .result-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .result-stat {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
        }

        .result-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
        }

        /* ì˜¤ë””ì˜¤ í”Œë ˆì´ì–´ ëª¨ë‹¬ */
        .audio-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .audio-content {
            background: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            max-width: 600px;
            width: 90%;
            position: relative;
        }

        .close-audio {
            position: absolute;
            top: 15px;
            right: 20px;
            background: none;
            border: none;
            font-size: 2rem;
            cursor: pointer;
            color: #666;
        }

        .audio-player {
            width: 100%;
            margin: 20px 0;
            border-radius: 10px;
        }

        .audio-controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .audio-control-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .play-pause-btn {
            background: linear-gradient(45deg, #1a1a1a, #8B0000);
            color: white;
        }

        .speed-btn {
            background: #f8f9fa;
            color: #333;
            border: 1px solid #ddd;
        }

        .download-btn {
            background: #8B0000;
            color: white;
        }

        .audio-info {
            margin-top: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            font-size: 0.9rem;
            color: #666;
            transition: all 0.3s ease;
        }

        .audio-info.hidden {
            display: none;
        }

        /* Level 5 íŠ¹ë³„ ìŠ¤íƒ€ì¼ */
        .level-badge {
            position: absolute;
            top: 10px;
            left: 10px;
            background: linear-gradient(45deg, #1a1a1a, #8B0000);
            color: white;
            padding: 5px 10px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* ë°˜ì‘í˜• */
        @media (max-width: 768px) {
            .chapters-grid {
                grid-template-columns: 1fr;
            }

            .header {
                flex-direction: column;
                gap: 20px;
                text-align: center;
            }

            .book-detail-header {
                flex-direction: column;
                text-align: center;
            }

            .book-stats {
                grid-template-columns: repeat(2, 1fr);
            }

            .learning-controls {
                flex-direction: column;
            }

            .chapter-actions {
                grid-template-columns: 1fr;
            }

            .audio-controls {
                justify-content: center;
                gap: 10px;
            }

            .audio-content {
                padding: 30px 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- í—¤ë” -->
        <div class="header">
            <div class="logo">
                <div class="logo-icon">ğŸ”¥</div>
                <div class="logo-text">
                    <h1>The Hunger Games</h1>
                    <p>Level 5 - Suzanne Collinsì˜ ë””ìŠ¤í† í”¼ì•„ ê±¸ì‘</p>
                </div>
            </div>
            <div class="nav-buttons">
                <a href="http://www.suelibrary.store/" class="nav-btn">ë©”ì¸ìœ¼ë¡œ</a>
            </div>
        </div>

        <!-- ë©”ì¸ ì½˜í…ì¸  -->
        <div class="main-content">
            <!-- ì±… ìƒì„¸ í™”ë©´ -->
            <div class="book-detail-screen" id="book-detail-screen">
                <div class="level-badge">Level 5</div>
                <div class="breadcrumb">
                    <span>The Hunger Games</span>
                </div>

                <div class="book-detail-header">
                    <div class="detail-book-cover">ğŸ”¥</div>
                    <div class="book-info">
                        <h2>The Hunger Games</h2>
                        <div class="author">Suzanne Collins</div>
                        <div class="book-summary">
                            In the post-apocalyptic nation of Panem, 16-year-old Katniss Everdeen volunteers to take her younger sister's place in the annual Hunger Gamesâ€”a televised fight to the death between 24 teenagers from the 12 districts. Set in a brutal dystopian future where the Capitol oppresses the districts through this horrific spectacle, Katniss must survive the arena while navigating complex relationships with fellow tribute Peeta Mellark and her hunting partner Gale. This gripping tale of survival, sacrifice, and rebellion explores themes of power, media manipulation, and the cost of war.
                        </div>
                        <div class="book-stats">
                            <div class="stat-box">
                                <div class="value">27</div>
                                <div class="label">ì±•í„°</div>
                            </div>
                            <div class="stat-box">
                                <div class="value">135</div>
                                <div class="label">ì´ ë¬¸ì œ</div>
                            </div>
                            <div class="stat-box">
                                <div class="value">Level 5</div>
                                <div class="label">ë ˆë²¨</div>
                            </div>
                            <div class="stat-box">
                                <div class="value" id="progress-value">0%</div>
                                <div class="label">ì§„ë„</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="chapters-section">
                    <h3>ğŸ”¥ ì±•í„°ë³„ í•™ìŠµ</h3>
                    <div id="chapters-container">
                        <!-- ì±•í„°ë“¤ì´ ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
                    </div>
                </div>
            </div>

            <!-- í•™ìŠµ í™”ë©´ -->
            <div class="learning-screen" id="learning-screen">
                <div class="breadcrumb">
                    <a onclick="showBookDetail()">The Hunger Games</a>
                    <span>></span>
                    <span id="learning-chapter-breadcrumb">Chapter 1</span>
                </div>

                <div class="learning-header">
                    <h2 id="learning-title">Chapter 1</h2>
                    <div class="learning-progress">
                        <div class="learning-progress-bar" id="learning-progress-bar" style="width: 0%"></div>
                    </div>
                    <p id="learning-progress-text">ë¬¸ì œ 1 / 5</p>
                </div>

                <div class="question-container" id="question-container">
                    <!-- ë¬¸ì œê°€ ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
                </div>

                <div class="learning-controls">
                    <button class="control-btn prev-btn" id="prev-btn" onclick="previousQuestion()" disabled>ì´ì „</button>
                    <button class="control-btn next-btn" id="next-btn" onclick="nextQuestion()">ë‹¤ìŒ</button>
                    <button class="control-btn submit-btn" id="submit-btn" onclick="submitAnswers()" style="display: none;">ì œì¶œ</button>
                </div>
            </div>

            <!-- ê²°ê³¼ í™”ë©´ -->
            <div class="result-screen" id="result-screen">
                <div class="breadcrumb">
                    <a onclick="showBookDetail()">The Hunger Games</a>
                    <span>></span>
                    <span>ê²°ê³¼</span>
                </div>

                <div class="result-header">
                    <h2>ğŸ‰ í•™ìŠµ ì™„ë£Œ!</h2>
                    <div class="score-circle" id="score-circle">100%</div>
                    <h3 id="result-message">í›Œë¥­í•©ë‹ˆë‹¤!</h3>
                </div>

                <div class="result-details">
                    <div class="result-stat">
                        <h4>ì´ ë¬¸ì œ</h4>
                        <p id="total-questions">5ë¬¸ì œ</p>
                    </div>
                    <div class="result-stat">
                        <h4>ì •ë‹µ</h4>
                        <p id="correct-answers">5ë¬¸ì œ</p>
                    </div>
                    <div class="result-stat">
                        <h4>ì˜¤ë‹µ</h4>
                        <p id="wrong-answers">0ë¬¸ì œ</p>
                    </div>
                    <div class="result-stat">
                        <h4>ì ìˆ˜</h4>
                        <p id="final-score">100ì </p>
                    </div>
                </div>

                <div class="result-actions">
                    <button class="control-btn prev-btn" onclick="retryChapter()">ë‹¤ì‹œ í’€ê¸°</button>
                    <button class="control-btn next-btn" onclick="nextChapter()">ë‹¤ìŒ ì±•í„°</button>
                    <button class="control-btn submit-btn" onclick="showBookDetail()">ì±•í„° ëª©ë¡</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ì˜¤ë””ì˜¤ í”Œë ˆì´ì–´ ëª¨ë‹¬ -->
    <div class="audio-modal" id="audio-modal">
        <div class="audio-content">
            <button class="close-audio" onclick="closeAudioModal()">Ã—</button>
            <h3 id="audio-chapter-title">Chapter 1</h3>
            <p id="audio-chapter-subtitle">The Hunger Games - Suzanne Collins</p>

            <audio class="audio-player" id="audio-player" controls preload="metadata">
                <source id="audio-source" src="" type="audio/mpeg">
                ë¸Œë¼ìš°ì €ê°€ ì˜¤ë””ì˜¤ë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
            </audio>

            <div class="audio-controls">
                <button class="audio-control-btn play-pause-btn" onclick="togglePlayPause()">â–¶ï¸ ì¬ìƒ</button>
                <button class="audio-control-btn speed-btn" onclick="changeSpeed()">1.0x</button>
                <button class="audio-control-btn download-btn" onclick="downloadAudio()">ğŸ“¥ ë‹¤ìš´ë¡œë“œ</button>
            </div>

            <div class="audio-info" id="audio-info">
                <div id="audio-status" style="margin-top: 10px; font-weight: bold; color: #1a1a1a;"></div>
            </div>
        </div>
    </div>

    <script>



       // ğŸ¯ êµ¬ê¸€ í´ë¼ìš°ë“œ ìŠ¤í† ë¦¬ì§€ ì˜¤ë””ì˜¤ URL ì„¤ì •
const AUDIO_BASE_URL = 'https://storage.googleapis.com/kim-mom-reading-audio/audio/';

// ğŸ¹ The Hunger Games ê°œë³„ íŒŒì¼ ë§¤í•‘ (27ê°œ ì±•í„°)
const hungerGamesChapterMapping = {
    1: { title: "Chapter 1", file: "HG001_chapter01.mp3" },
    2: { title: "Chapter 2", file: "HG001_chapter02.mp3" },
    3: { title: "Chapter 3", file: "HG001_chapter03.mp3" },
    4: { title: "Chapter 4", file: "HG001_chapter04.mp3" },
    5: { title: "Chapter 5", file: "HG001_chapter05.mp3" },
    6: { title: "Chapter 6", file: "HG001_chapter06.mp3" },
    7: { title: "Chapter 7", file: "HG001_chapter07.mp3" },
    8: { title: "Chapter 8", file: "HG001_chapter08.mp3" },
    9: { title: "Chapter 9", file: "HG001_chapter09.mp3" },
    10: { title: "Chapter 10", file: "HG001_chapter10.mp3" },
    11: { title: "Chapter 11", file: "HG001_chapter11.mp3" },
    12: { title: "Chapter 12", file: "HG001_chapter12.mp3" },
    13: { title: "Chapter 13", file: "HG001_chapter13.mp3" },
    14: { title: "Chapter 14", file: "HG001_chapter14.mp3" },
    15: { title: "Chapter 15", file: "HG001_chapter15.mp3" },
    16: { title: "Chapter 16", file: "HG001_chapter16.mp3" },
    17: { title: "Chapter 17", file: "HG001_chapter17.mp3" },
    18: { title: "Chapter 18", file: "HG001_chapter18.mp3" },
    19: { title: "Chapter 19", file: "HG001_chapter19.mp3" },
    20: { title: "Chapter 20", file: "HG001_chapter20.mp3" },
    21: { title: "Chapter 21", file: "HG001_chapter21.mp3" },
    22: { title: "Chapter 22", file: "HG001_chapter22.mp3" },
    23: { title: "Chapter 23", file: "HG001_chapter23.mp3" },
    24: { title: "Chapter 24", file: "HG001_chapter24.mp3" },
    25: { title: "Chapter 25", file: "HG001_chapter25.mp3" },
    26: { title: "Chapter 26", file: "HG001_chapter26.mp3" },
    27: { title: "Chapter 27", file: "HG001_chapter27.mp3" }
};

// ì „ì—­ ë³€ìˆ˜
let currentChapter = 0; // ì¸ë±ìŠ¤ ê¸°ë°˜ (0-26)
let currentChapterIndex = 0;
let currentQuestionIndex = 0;
let userAnswers = [];
let questions = [];
let currentAudio = null;
let playbackSpeed = 1.0;
let isChapterMode = true; // ê°œë³„ íŒŒì¼ì´ë¯€ë¡œ í•­ìƒ ì±•í„° ëª¨ë“œ

// ğŸ§ ì‹œê°„ì„ ì‹œ:ë¶„:ì´ˆ í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” í•¨ìˆ˜
function formatTime(seconds) {
    const hours = Math.floor(seconds / 3600);
    const minutes = Math.floor((seconds % 3600) / 60);
    const secs = Math.floor(seconds % 60);

    if (hours > 0) {
        return `${hours}:${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
    } else {
        return `${minutes}:${secs.toString().padStart(2, '0')}`;
    }
}

// ğŸ¹ The Hunger Games ì˜¤ë””ì˜¤ URL ìƒì„± í•¨ìˆ˜ (ê°œë³„ íŒŒì¼)
function getAudioUrl(chapterIndex) {
    const chapterNumber = chapterIndex + 1;
    const chapterData = hungerGamesChapterMapping[chapterNumber];

    if (!chapterData) {
        // ê¸°ì¡´ ë°©ì‹ê³¼ í˜¸í™˜ì„± ìœ ì§€
        const fileName = `HG001_chapter${String(chapterNumber).padStart(2, '0')}.mp3`;
        return {
            primary: `${AUDIO_BASE_URL}HG001-The-Hunger-Games/${fileName}`,
            alternatives: [`${AUDIO_BASE_URL}HG001-The-Hunger-Games/${fileName}`],
            chapterNumber: chapterNumber,
            title: `Chapter ${chapterNumber}`,
            file: fileName
        };
    }

    return {
        primary: `${AUDIO_BASE_URL}HG001-The-Hunger-Games/${chapterData.file}`,
        chapterNumber: chapterNumber,
        title: chapterData.title,
        file: chapterData.file,
        alternatives: [`${AUDIO_BASE_URL}HG001-The-Hunger-Games/${chapterData.file}`]
    };
}

// ğŸ§ íŒŒì¼ ë ê°ì§€ ë° ë‹¤ìŒ ì±•í„° ì œì•ˆ í•¨ìˆ˜
function monitorFileEnd(audioPlayer, chapterNumber) {
    const endedHandler = function() {
        const audioStatus = document.getElementById('audio-status');
        const totalProgress = calculateTotalProgress();

        audioStatus.innerHTML = `âœ… Chapter ${chapterNumber} ì™„ë£Œ! (ì „ì²´ ì§„í–‰ë¥ : ${totalProgress.percentage}%)`;

        // ì§„í–‰ë¥  ë°” 100%ë¡œ ì—…ë°ì´íŠ¸
        updateProgressBar(100, totalProgress.percentage);

        document.querySelector('.play-pause-btn').textContent = 'â–¶ï¸ ì¬ìƒ';

        console.log(`ğŸ Chapter ${chapterNumber} ì™„ë£Œ - ì „ì²´ ì§„í–‰ë¥ : ${totalProgress.percentage}%`);

        // ë‹¤ìŒ ì±•í„° ìë™ ì œì•ˆ
        if (chapterNumber < 27) {
            setTimeout(() => {
                if (confirm(`Chapter ${chapterNumber}ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.\nì „ì²´ ì§„í–‰ë¥ : ${totalProgress.percentage}%\n\nChapter ${chapterNumber + 1}ì„ ì¬ìƒí•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
                    playChapterAudio(chapterNumber);
                }
            }, 1000);
        } else {
            setTimeout(() => {
                alert('ğŸ‰ The Hunger Games ì™„ë…ì„ ì¶•í•˜í•©ë‹ˆë‹¤!\nìµœì¢… ì§„í–‰ë¥ : 100% ğŸ†');
            }, 1000);
        }
    };

    audioPlayer.addEventListener('ended', endedHandler, { once: true });
}

// ğŸ¹ The Hunger Games ì±•í„° ì˜¤ë””ì˜¤ ì¬ìƒ í•¨ìˆ˜
function playChapterAudio(chapterIndex) {
    // chapterIndexëŠ” 0-26, chapterNumberëŠ” 1-27
    const chapterNumber = chapterIndex + 1;

    if (chapterNumber < 1 || chapterNumber > 27) {
        alert('ìœ íš¨í•˜ì§€ ì•Šì€ ì±•í„° ë²ˆí˜¸ì…ë‹ˆë‹¤. (1-27)');
        return;
    }

    const audioData = getAudioUrl(chapterIndex);
    if (!audioData) {
        alert(`Chapter ${chapterNumber}ì˜ ì˜¤ë””ì˜¤ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`);
        return;
    }

    document.getElementById('audio-modal').style.display = 'flex';
    document.getElementById('audio-chapter-title').textContent = audioData.title;
    document.getElementById('audio-chapter-subtitle').textContent = `The Hunger Games - Suzanne Collins`;

    const audioInfoElement = document.getElementById('audio-info');
    if (audioInfoElement) {
        audioInfoElement.classList.remove('hidden');
    }

    const audioPlayer = document.getElementById('audio-player');
    const audioSource = document.getElementById('audio-source');
    const audioStatus = document.getElementById('audio-status');

    // í˜„ì¬ ì±•í„° ì„¤ì • (ì¸ë±ìŠ¤ë¡œ ì €ì¥)
    currentChapter = chapterIndex;
    currentChapterIndex = chapterIndex;

    audioStatus.textContent = 'ğŸ”„ ì˜¤ë””ì˜¤ íŒŒì¼ì„ ë¡œë”© ì¤‘...';

    // ê°œë³„ íŒŒì¼ ë¡œë“œ
    audioSource.src = audioData.primary;
    audioPlayer.load();

    const successHandler = function() {
        audioPlayer.currentTime = 0; // íŒŒì¼ ì²˜ìŒë¶€í„° ì‹œì‘

        audioStatus.innerHTML = `âœ… ${audioData.title} ì¤€ë¹„ì™„ë£Œ!<br>
                                ğŸ“ íŒŒì¼: ${audioData.file}<br>
                                ğŸµ â–¶ï¸ ì¬ìƒ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”`;

        // ì§„í–‰ë¥  ë°” ìƒì„±
        createProgressBars();

        // ì´ˆê¸° ì§„í–‰ë¥  í‘œì‹œ
        updateChapterDisplay();

        // íŒŒì¼ ë ê°ì§€ ì‹œì‘
        monitorFileEnd(audioPlayer, chapterNumber);
    };

    const errorHandler = function() {
        audioStatus.innerHTML = `âŒ ì˜¤ë””ì˜¤ íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.<br>íŒŒì¼: ${audioData.file}`;
        console.error('ì˜¤ë””ì˜¤ ë¡œë“œ ì‹¤íŒ¨:', audioData.primary);
    };

    audioPlayer.addEventListener('canplaythrough', successHandler, { once: true });
    audioPlayer.addEventListener('error', errorHandler, { once: true });

    currentAudio = audioPlayer;
    playbackSpeed = 1.0;
}

// ğŸ§ ì „ì²´ ì˜¤ë””ì˜¤ë¶ ì¬ìƒ í•¨ìˆ˜ (1ë²ˆ ì±•í„°ë¶€í„° ìˆœì°¨ ì¬ìƒ)
function playFullAudiobook() {
    playChapterAudio(0); // chapterIndex 0 = Chapter 1

    // ì „ì²´ ì¬ìƒ ëª¨ë“œ í‘œì‹œ
    setTimeout(() => {
        document.getElementById('audio-chapter-title').textContent = 'The Hunger Games - ì „ì²´ ì¬ìƒ';
        document.getElementById('audio-chapter-subtitle').textContent = 'ì—°ì† ì¬ìƒ ëª¨ë“œ (Chapter 1ë¶€í„°)';
    }, 500);
}

// ğŸ§ êµ¬ê°„ì²˜ìŒìœ¼ë¡œ í•¨ìˆ˜ (í˜„ì¬ ì±•í„° ì²˜ìŒìœ¼ë¡œ)
function resetToChapterStart() {
    if (!currentAudio) return;

    currentAudio.currentTime = 0;
    console.log(`ğŸ”„ Chapter ${currentChapter + 1} ì²˜ìŒìœ¼ë¡œ ì´ë™`);

    const audioStatus = document.getElementById('audio-status');
    audioStatus.innerHTML = `ğŸ”„ Chapter ${currentChapter + 1} ì²˜ìŒìœ¼ë¡œ ì´ë™`;
}

// ğŸ§ ë‹¤ìŒ ì±•í„°ë¡œ ì´ë™ í•¨ìˆ˜
function jumpToNextChapter() {
    if (currentChapter >= 26) { // ì¸ë±ìŠ¤ 26 = Chapter 27
        alert('ë§ˆì§€ë§‰ ì±•í„°ì…ë‹ˆë‹¤!');
        return;
    }
    playChapterAudio(currentChapter + 1);
}

// ğŸ§ ì´ì „ ì±•í„°ë¡œ ì´ë™ í•¨ìˆ˜
function jumpToPreviousChapter() {
    if (currentChapter <= 0) { // ì¸ë±ìŠ¤ 0 = Chapter 1
        alert('ì²« ë²ˆì§¸ ì±•í„°ì…ë‹ˆë‹¤!');
        return;
    }
    playChapterAudio(currentChapter - 1);
}

// ğŸ§ íŠ¹ì • ì±•í„°ë¡œ ì í”„
function jumpToChapter(chapterNumber) {
    if (chapterNumber >= 1 && chapterNumber <= 27) {
        playChapterAudio(chapterNumber - 1); // chapterNumberë¥¼ ì¸ë±ìŠ¤ë¡œ ë³€í™˜
    } else {
        alert('ìœ íš¨í•˜ì§€ ì•Šì€ ì±•í„° ë²ˆí˜¸ì…ë‹ˆë‹¤. (1-27)');
    }
}

// ğŸ§ 10ì´ˆ ì•/ë’¤ë¡œ ì´ë™
function skipForward() {
    if (!currentAudio) return;
    currentAudio.currentTime = Math.min(currentAudio.currentTime + 10, currentAudio.duration);
}

function skipBackward() {
    if (!currentAudio) return;
    currentAudio.currentTime = Math.max(currentAudio.currentTime - 10, 0);
}

// ğŸ§ í˜„ì¬ ì¬ìƒ ì¤‘ì¸ ì±•í„° ì •ë³´ í‘œì‹œ
function getCurrentChapterInfo() {
    if (!currentAudio) return null;

    const currentTime = currentAudio.currentTime;
    const duration = currentAudio.duration;
    const progress = duration > 0 ? Math.round((currentTime / duration) * 100) : 0;

    return {
        chapterNumber: currentChapter + 1, // ì‚¬ìš©ìì—ê²ŒëŠ” 1-27ë¡œ í‘œì‹œ
        currentTime: formatTime(currentTime),
        duration: formatTime(duration),
        progress: progress
    };
}

// ğŸ§ ì±•í„° ì •ë³´ë¥¼ UIì— í‘œì‹œí•˜ëŠ” í•¨ìˆ˜
function updateChapterDisplay() {
    const info = getCurrentChapterInfo();
    if (info) {
        const audioStatus = document.getElementById('audio-status');
        const totalProgress = calculateTotalProgress();

        audioStatus.innerHTML = `ğŸµ Chapter ${info.chapterNumber}/27 ì¬ìƒ ì¤‘ (${info.progress}% ì™„ë£Œ)<br>
                                ğŸ“ ${info.currentTime} / ${info.duration}<br>
                                ğŸ“š ì „ì²´ ì§„í–‰ë¥ : ${totalProgress.percentage}% (${totalProgress.completedChapters}/27 ì±•í„°)`;

        // ì§„í–‰ë¥  ë°” ì—…ë°ì´íŠ¸
        updateProgressBar(info.progress, totalProgress.percentage);
    }
}

// ğŸ§ ì „ì²´ ì§„í–‰ë¥  ê³„ì‚° í•¨ìˆ˜
function calculateTotalProgress() {
    if (!currentAudio) return { percentage: 0, completedChapters: 0 };

    const currentTime = currentAudio.currentTime;
    const duration = currentAudio.duration;
    const currentChapterProgress = duration > 0 ? (currentTime / duration) : 0;

    // ì™„ë£Œëœ ì±•í„° ìˆ˜ + í˜„ì¬ ì±•í„° ì§„í–‰ë¥ 
    const completedChapters = currentChapter; // ì´ì „ ì±•í„°ë“¤ì€ ì™„ë£Œë¡œ ê°„ì£¼
    const totalProgress = (completedChapters + currentChapterProgress) / 27;

    return {
        percentage: Math.round(totalProgress * 100),
        completedChapters: completedChapters,
        currentChapterProgress: Math.round(currentChapterProgress * 100)
    };
}

// ğŸ§ ì§„í–‰ë¥  ë°” ì—…ë°ì´íŠ¸ í•¨ìˆ˜
function updateProgressBar(chapterProgress, totalProgress) {
    // ì±•í„° ì§„í–‰ë¥  ë°”
    let chapterProgressBar = document.getElementById('chapter-progress-bar');
    if (!chapterProgressBar) {
        createProgressBars();
        chapterProgressBar = document.getElementById('chapter-progress-bar');
    }

    // ì „ì²´ ì§„í–‰ë¥  ë°”
    const totalProgressBar = document.getElementById('total-progress-bar');

    if (chapterProgressBar && totalProgressBar) {
        chapterProgressBar.style.width = `${chapterProgress}%`;
        totalProgressBar.style.width = `${totalProgress}%`;

        // ìƒ‰ìƒ ë³€ê²½ (ì§„í–‰ë¥ ì— ë”°ë¼)
        if (chapterProgress < 30) {
            chapterProgressBar.style.backgroundColor = '#ff6b6b';
        } else if (chapterProgress < 70) {
            chapterProgressBar.style.backgroundColor = '#ffa726';
        } else {
            chapterProgressBar.style.backgroundColor = '#66bb6a';
        }

        if (totalProgress < 30) {
            totalProgressBar.style.backgroundColor = '#e74c3c';
        } else if (totalProgress < 70) {
            totalProgressBar.style.backgroundColor = '#f39c12';
        } else {
            totalProgressBar.style.backgroundColor = '#27ae60';
        }
    }
}

// ğŸ§ ì§„í–‰ë¥  ë°” ìƒì„± í•¨ìˆ˜
function createProgressBars() {
    const audioInfo = document.getElementById('audio-info');
    if (!audioInfo || document.getElementById('progress-container')) return;

    const progressContainer = document.createElement('div');
    progressContainer.id = 'progress-container';
    progressContainer.style.cssText = `
        margin-top: 15px;
        padding: 10px;
        background: rgba(0,0,0,0.1);
        border-radius: 8px;
    `;

    // ì±•í„° ì§„í–‰ë¥  ë°”
    const chapterProgressContainer = document.createElement('div');
    chapterProgressContainer.innerHTML = `
        <div style="font-size: 12px; margin-bottom: 5px; color: #666;">í˜„ì¬ ì±•í„° ì§„í–‰ë¥ </div>
        <div style="width: 100%; height: 8px; background: #ddd; border-radius: 4px; overflow: hidden;">
            <div id="chapter-progress-bar" style="height: 100%; width: 0%; background: #66bb6a; transition: width 0.3s ease;"></div>
        </div>
    `;

    // ì „ì²´ ì§„í–‰ë¥  ë°”
    const totalProgressContainer = document.createElement('div');
    totalProgressContainer.innerHTML = `
        <div style="font-size: 12px; margin: 10px 0 5px 0; color: #666;">ì „ì²´ ë„ì„œ ì§„í–‰ë¥ </div>
        <div style="width: 100%; height: 12px; background: #ddd; border-radius: 6px; overflow: hidden;">
            <div id="total-progress-bar" style="height: 100%; width: 0%; background: #27ae60; transition: width 0.3s ease;"></div>
        </div>
    `;

    progressContainer.appendChild(chapterProgressContainer);
    progressContainer.appendChild(totalProgressContainer);
    audioInfo.appendChild(progressContainer);
}

// ğŸ§ ê¸°ë³¸ ì˜¤ë””ì˜¤ ì»¨íŠ¸ë¡¤ í•¨ìˆ˜ë“¤
function closeAudioModal() {
    document.getElementById('audio-modal').style.display = 'none';
    if (currentAudio) {
        currentAudio.pause();
    }
}

function togglePlayPause() {
    if (!currentAudio) return;

    if (currentAudio.paused) {
        currentAudio.play().then(() => {
            document.querySelector('.play-pause-btn').textContent = 'â¸ï¸ ì¼ì‹œì •ì§€';

            const audioStatus = document.getElementById('audio-status');
            audioStatus.innerHTML = `ğŸµ Chapter ${currentChapter + 1} ì¬ìƒ ì¤‘!`;
        }).catch(e => {
            console.log('ì¬ìƒ ì‹¤íŒ¨:', e);
            const audioStatus = document.getElementById('audio-status');
            audioStatus.innerHTML = 'âŒ ì¬ìƒì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.';
        });
    } else {
        currentAudio.pause();
        document.querySelector('.play-pause-btn').textContent = 'â–¶ï¸ ì¬ìƒ';

        const audioStatus = document.getElementById('audio-status');
        audioStatus.innerHTML = `â¸ï¸ Chapter ${currentChapter + 1} ì¼ì‹œì •ì§€ë¨`;
    }
}

function changeSpeed() {
    if (!currentAudio) return;

    const speeds = [0.5, 0.75, 1.0, 1.25, 1.5, 2.0];
    const currentIndex = speeds.indexOf(playbackSpeed);
    playbackSpeed = speeds[(currentIndex + 1) % speeds.length];
    currentAudio.playbackRate = playbackSpeed;

    const speedBtn = document.querySelector('.speed-btn');
    if (speedBtn) {
        speedBtn.textContent = `${playbackSpeed}x`;
    }

    console.log(`ğŸµ ì¬ìƒ ì†ë„ ë³€ê²½: ${playbackSpeed}x`);
}

function downloadAudio() {
    const audioSource = document.getElementById('audio-source');
    if (audioSource.src) {
        const link = document.createElement('a');
        link.href = audioSource.src;

        const chapterData = hungerGamesChapterMapping[currentChapter + 1]; // ì¸ë±ìŠ¤ë¥¼ ë²ˆí˜¸ë¡œ ë³€í™˜
        const fileName = chapterData ? `${chapterData.title}.mp3` : 'HungerGames_Chapter.mp3';

        link.download = fileName;
        link.click();

        console.log(`ğŸ“¥ ì˜¤ë””ì˜¤ ë‹¤ìš´ë¡œë“œ ì‹œì‘: ${fileName}`);
    } else {
        alert('ë‹¤ìš´ë¡œë“œí•  ì˜¤ë””ì˜¤ íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤.');
    }
}

// ğŸ§ í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ ì§€ì›
document.addEventListener('keydown', function(event) {
    const audioModal = document.getElementById('audio-modal');
    if (!audioModal || audioModal.style.display === 'none') return;

    switch(event.code) {
        case 'Space':
            event.preventDefault();
            togglePlayPause();
            break;
        case 'ArrowLeft':
            event.preventDefault();
            skipBackward();
            break;
        case 'ArrowRight':
            event.preventDefault();
            skipForward();
            break;
        case 'ArrowUp':
            event.preventDefault();
            jumpToPreviousChapter();
            break;
        case 'ArrowDown':
            event.preventDefault();
            jumpToNextChapter();
            break;
        case 'KeyS':
            event.preventDefault();
            changeSpeed();
            break;
        case 'KeyR':
            event.preventDefault();
            resetToChapterStart();
            break;
        case 'Escape':
            event.preventDefault();
            closeAudioModal();
            break;
    }
});

// ğŸ¹ ì´ˆê¸°í™” í•¨ìˆ˜
function initializeHungerGamesAudio() {
    console.log('ğŸ¹ The Hunger Games ì˜¤ë””ì˜¤ ì‹œìŠ¤í…œ ì´ˆê¸°í™” ì™„ë£Œ');
    console.log('ğŸ“š ì´ 27ê°œ ì±•í„°, ê°œë³„ íŒŒì¼ ì‹œìŠ¤í…œ');
    console.log('ğŸ¯ 1:1 ì™„ë²½ ë§¤í•‘ (Chapter 1 = HG001_chapter01.mp3)');
    console.log('ğŸ“Š ì‹¤ì‹œê°„ ì§„í–‰ë¥  í‘œì‹œ ê¸°ëŠ¥ í¬í•¨');
    console.log('âŒ¨ï¸ í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤: Space(ì¬ìƒ/ì •ì§€), â†â†’(10ì´ˆ ìŠ¤í‚µ), â†‘â†“(ì±•í„° ì´ë™), S(ì†ë„), R(ì²˜ìŒìœ¼ë¡œ), ESC(ë‹«ê¸°)');

    // 1ì´ˆë§ˆë‹¤ ì±•í„° ì •ë³´ ì—…ë°ì´íŠ¸ (ë” ìì£¼ ì—…ë°ì´íŠ¸)
    setInterval(() => {
        if (currentAudio && !currentAudio.paused) {
            updateChapterDisplay();
        }
    }, 1000);
}

// ì´ˆê¸°í™” ì‹¤í–‰ (DOM ë¡œë“œ í›„)
document.addEventListener('DOMContentLoaded', initializeHungerGamesAudio);


        // The Hunger Games ë„ì„œ ë°ì´í„° (27ì±•í„°, 3ë¶€ êµ¬ì„±)
        const bookData = {
            id: 'THG001',
            title: "The Hunger Games",
            author: 'Suzanne Collins',
            cover: 'ğŸ”¥',
            progress: 0,
            chapters: 27,
            totalQuestions: 135,
            coverColor: 'linear-gradient(45deg, #1a1a1a, #8B0000)',
            summary: "In the post-apocalyptic nation of Panem, 16-year-old Katniss Everdeen volunteers to take her younger sister's place in the annual Hunger Gamesâ€”a televised fight to the death between 24 teenagers from the 12 districts. Set in a brutal dystopian future where the Capitol oppresses the districts through this horrific spectacle, Katniss must survive the arena while navigating complex relationships with fellow tribute Peeta Mellark and her hunting partner Gale. This gripping tale of survival, sacrifice, and rebellion explores themes of power, media manipulation, and the cost of war.",
            parts: [
                {
                    title: "Part I: The Tributes",
                    description: "From reaping day to entering the arena",
                    chapters: [1, 2, 3, 4, 5, 6, 7, 8, 9]
                },
                {
                    title: "Part II: The Games",
                    description: "Survival in the deadly arena",
                    chapters: [10, 11, 12, 13, 14, 15, 16, 17, 18]
                },
                {
                    title: "Part III: The Victor",
                    description: "Victory and its consequences",
                    chapters: [19, 20, 21, 22, 23, 24, 25, 26, 27]
                }
            ],
            chapterList: [
                // Part I: The Tributes (Chapters 1-9)
                { title: 'Chapter 1', description: 'Katniss wakes on reaping day and hunts with Gale in the forbidden woods.', status: 'current', questionCount: 5, part: 0 },
                { title: 'Chapter 2', description: 'The reaping ceremony. Prim is chosen, and Katniss volunteers as tribute.', status: 'current', questionCount: 5, part: 0 },
                { title: 'Chapter 3', description: 'Katniss says goodbye to family and friends before leaving for the Capitol.', status: 'current', questionCount: 5, part: 0 },
                { title: 'Chapter 4', description: 'The train journey to the Capitol with Peeta, Effie, and drunk mentor Haymitch.', status: 'current', questionCount: 5, part: 0 },
                { title: 'Chapter 5', description: 'Katniss meets her stylist Cinna and gets her first Capitol makeover.', status: 'current', questionCount: 5, part: 0 },
                { title: 'Chapter 6', description: 'The tribute parade with fire costumes that earn Katniss the nickname "Girl on Fire."', status: 'current', questionCount: 5, part: 0 },
                { title: 'Chapter 7', description: 'Training begins. Katniss meets the Careers and learns about the Avox girl.', status: 'current', questionCount: 5, part: 0 },
                { title: 'Chapter 8', description: 'Katniss shoots an arrow at the Gamemakers during her private session.', status: 'current', questionCount: 5, part: 0 },
                { title: 'Chapter 9', description: 'Pre-Games interviews. Peeta confesses his love for Katniss on live TV.', status: 'current', questionCount: 5, part: 0 },

                // Part II: The Games (Chapters 10-18)
                { title: 'Chapter 10', description: 'The Games begin. Katniss flees the bloodbath at the Cornucopia.', status: 'current', questionCount: 5, part: 1 },
                { title: 'Chapter 11', description: 'Katniss struggles to find water and narrowly escapes a forest fire.', status: 'current', questionCount: 5, part: 1 },
                { title: 'Chapter 12', description: 'Tracker jackers attack. Katniss hallucinates and gets a bow from the dead Glimmer.', status: 'current', questionCount: 5, part: 1 },
                { title: 'Chapter 13', description: 'Katniss teams up with young Rue from District 11.', status: 'current', questionCount: 5, part: 1 },
                { title: 'Chapter 14', description: 'Katniss and Rue plan to destroy the Careers\' food supply.', status: 'current', questionCount: 5, part: 1 },
                { title: 'Chapter 15', description: 'The plan succeeds, but Rue is killed by Marvel. Katniss kills Marvel in revenge.', status: 'current', questionCount: 5, part: 1 },
                { title: 'Chapter 16', description: 'Katniss honors Rue with flowers. Rule change allows two winners from same district.', status: 'current', questionCount: 5, part: 1 },
                { title: 'Chapter 17', description: 'Katniss searches for Peeta and finds him camouflaged and badly injured.', status: 'current', questionCount: 5, part: 1 },
                { title: 'Chapter 18', description: 'Katniss cares for Peeta in the cave. The feast is announced.', status: 'current', questionCount: 5, part: 1 },

                // Part III: The Victor (Chapters 19-27)
                { title: 'Chapter 19', description: 'Katniss gets medicine at the feast but is nearly killed by Clove.', status: 'current', questionCount: 5, part: 2 },
                { title: 'Chapter 20', description: 'Thresh saves Katniss. Peeta recovers and they hear mysterious sounds.', status: 'current', questionCount: 5, part: 2 },
                { title: 'Chapter 21', description: 'Mutant wolves attack. Cato, Katniss, and Peeta fight on the Cornucopia.', status: 'current', questionCount: 5, part: 2 },
                { title: 'Chapter 22', description: 'Katniss kills Cato. The rules change back - only one winner allowed.', status: 'current', questionCount: 5, part: 2 },
                { title: 'Chapter 23', description: 'Katniss threatens suicide with poisonous berries. Both are declared winners.', status: 'current', questionCount: 5, part: 2 },
                { title: 'Chapter 24', description: 'Recovery and preparation for the final interviews. Haymitch warns of danger.', status: 'current', questionCount: 5, part: 2 },
                { title: 'Chapter 25', description: 'The final interview with Caesar Flickerman. Katniss plays up the love story.', status: 'current', questionCount: 5, part: 2 },
                { title: 'Chapter 26', description: 'The victors\' banquet with President Snow. Katniss senses his displeasure.', status: 'current', questionCount: 5, part: 2 },
                { title: 'Chapter 27', description: 'Return to District 12. Katniss realizes she must continue the star-crossed lovers act.', status: 'current', questionCount: 5, part: 2 }
            ]
        };

        // ë¬¸ì œ ë°ì´í„° (ì‹¤ì œ ìŠ¤í† ë¦¬ì— ê¸°ë°˜í•œ ì •í™•í•œ ë‚´ìš©)
const questionsData = {
    // PART 1: THE HUNGER GAMES (Chapters 1-9)
    0: [ // Chapter 1
        {
            passage: "Katniss wakes up on the morning of the reaping and finds her sister Prim's warm spot in the bed, but Prim is gone.",
            question: "What does Katniss discover when she wakes up on reaping day?",
            options: ["Prim is still sleeping", "Prim's warm spot in bed but Prim is gone", "Prim is crying", "Prim has already left for the reaping"],
            correct: 1
        },
        {
            passage: "Katniss retrieves her father's bow from its hiding place in a hollow log outside District 12's fence.",
            question: "Where does Katniss hide her father's bow?",
            options: ["Under her bed", "In a hollow log outside the district fence", "In their basement", "At Gale's house"],
            correct: 1
        },
        {
            passage: "Gale suggests they could run away and live in the woods, but Katniss reminds him their families would starve without them.",
            question: "Why doesn't Katniss agree to run away with Gale?",
            options: ["She's afraid of the woods", "Their families would starve without them", "She wants to enter the Games", "She doesn't trust Gale"],
            correct: 1
        },
        {
            passage: "At the reaping, Mayor Undersee reads the history of Panem and the Treaty of Treason that established the Hunger Games.",
            question: "What does Mayor Undersee read about at the reaping ceremony?",
            options: ["The weather forecast", "The history of Panem and the Treaty of Treason", "The names of past victors", "The rules of District 12"],
            correct: 1
        },
        {
            passage: "Haymitch Abernathy, District 12's only living Hunger Games winner, arrives drunk and staggers onto the stage.",
            question: "Who is Haymitch Abernathy?",
            options: ["The mayor of District 12", "District 12's only living Hunger Games winner", "Katniss's father", "A Peacekeeper"],
            correct: 1
        }
    ],
    1: [ // Chapter 2
        {
            passage: "Effie Trinket draws the name 'Primrose Everdeen' for the female tribute, causing Katniss to panic.",
            question: "Whose name does Effie Trinket draw for the female tribute?",
            options: ["Katniss Everdeen", "Primrose Everdeen", "Madge Undersee", "Delly Cartwright"],
            correct: 1
        },
        {
            passage: "Katniss immediately volunteers as tribute, shouting 'I volunteer!' and rushing to take Prim's place.",
            question: "What does Katniss do when Prim's name is called?",
            options: ["She faints", "She volunteers as tribute to take Prim's place", "She tries to hide", "She runs away"],
            correct: 1
        },
        {
            passage: "Peeta Mellark's name is drawn as the male tribute, which troubles Katniss because of their shared history.",
            question: "Who is selected as the male tribute from District 12?",
            options: ["Gale Hawthorne", "Peeta Mellark", "Haymitch Abernathy", "Mayor Undersee"],
            correct: 1
        },
        {
            passage: "The crowd gives Katniss the three-finger salute, a gesture of respect and farewell used in District 12.",
            question: "How does the crowd respond to Katniss's volunteering?",
            options: ["They cheer loudly", "They give her the three-finger salute of respect", "They boo and protest", "They remain completely silent"],
            correct: 1
        },
        {
            passage: "Katniss remembers how Peeta once threw her burnt bread when her family was starving, an act of kindness that saved them.",
            question: "Why does Katniss feel conflicted about Peeta being chosen?",
            options: ["She dislikes him", "He once gave her burnt bread when her family was starving", "He's too strong", "He's her boyfriend"],
            correct: 1
        }
    ],
    2: [ // Chapter 3
        {
            passage: "Katniss gets an hour to say goodbye to her family and friends in the Justice Building.",
            question: "How much time does Katniss get to say goodbye?",
            options: ["Thirty minutes", "One hour", "Two hours", "All day"],
            correct: 1
        },
        {
            passage: "Madge, the mayor's daughter, gives Katniss a mockingjay pin to wear as her district token.",
            question: "What does Madge give Katniss as her district token?",
            options: ["A necklace", "A mockingjay pin", "A ring", "A bracelet"],
            correct: 1
        },
        {
            passage: "Katniss makes her mother promise not to 'go away' again like she did after her father's death.",
            question: "What does Katniss make her mother promise?",
            options: ["To take care of the goat", "Not to 'go away' again like after father's death", "To visit her in the Capitol", "To remarry soon"],
            correct: 1
        },
        {
            passage: "The baker, Peeta's father, visits Katniss and promises to make sure Prim doesn't go hungry.",
            question: "What does Peeta's father promise Katniss?",
            options: ["To help her win", "To make sure Prim doesn't go hungry", "To take care of her mother", "To send her gifts"],
            correct: 1
        },
        {
            passage: "Gale visits last and tells Katniss to remember that she knows how to hunt and kill.",
            question: "What advice does Gale give Katniss?",
            options: ["To hide and avoid fighting", "To remember she knows how to hunt and kill", "To trust no one", "To find water first"],
            correct: 1
        }
    ],
    3: [ // Chapter 4
        {
            passage: "Katniss and Peeta board a luxurious train that will take them to the Capitol in less than a day.",
            question: "How long does the train journey to the Capitol take?",
            options: ["Less than a day", "Three days", "A week", "Several hours"],
            correct: 0
        },
        {
            passage: "The train has more luxury food than Katniss has ever seen, and she tries everything despite feeling sick.",
            question: "How does Katniss react to the food on the train?",
            options: ["She refuses to eat", "She tries everything despite feeling sick", "She only eats bread", "She shares it all with Peeta"],
            correct: 1
        },
        {
            passage: "Effie Trinket complains about District 12's lack of manners but is excited about having volunteers for once.",
            question: "What does Effie Trinket complain about regarding District 12?",
            options: ["Their poverty", "Their lack of manners", "Their hunting skills", "Their appearance"],
            correct: 1
        },
        {
            passage: "Haymitch appears for dinner very drunk and ends up vomiting on the expensive carpet.",
            question: "What happens when Haymitch appears for dinner?",
            options: ["He gives great advice", "He appears drunk and vomits on the carpet", "He refuses to eat", "He immediately goes to sleep"],
            correct: 1
        },
        {
            passage: "Peeta helps clean up Haymitch and gets him to bed, showing kindness that surprises Katniss.",
            question: "How does Peeta respond to Haymitch's condition?",
            options: ["He ignores him", "He helps clean him up and gets him to bed", "He laughs at him", "He gets angry"],
            correct: 1
        }
    ],
    4: [ // Chapter 5
        {
            passage: "Katniss is prepared for the Capitol by a prep team who wax, pluck, and scrub her until she's raw.",
            question: "How do the prep team prepare Katniss?",
            options: ["They give her new clothes", "They wax, pluck, and scrub her until she's raw", "They just wash her hair", "They paint her nails"],
            correct: 1
        },
        {
            passage: "Cinna, Katniss's stylist, is understated and kind, very different from typical Capitol people.",
            question: "How is Cinna different from typical Capitol people?",
            options: ["He's very loud and colorful", "He's understated and kind", "He's mean and harsh", "He's extremely wealthy"],
            correct: 1
        },
        {
            passage: "Cinna tells Katniss that he requested to be assigned to District 12, the least desirable district.",
            question: "Why is Cinna working with District 12 tributes?",
            options: ["He was forced to", "He requested to be assigned to District 12", "He drew the short straw", "It was his punishment"],
            correct: 1
        },
        {
            passage: "For the opening ceremony, Cinna designs a costume that will make Katniss and Peeta appear to be on fire.",
            question: "What special effect will Cinna's costume create?",
            options: ["Make them invisible", "Make them appear to be on fire", "Make them look like trees", "Make them glow in the dark"],
            correct: 1
        },
        {
            passage: "Cinna assures Katniss that the fire is synthetic and won't actually burn her, just create the illusion.",
            question: "What does Cinna tell Katniss about the fire effect?",
            options: ["It will be real fire", "It's synthetic and won't actually burn her", "It will be very hot", "It only works in sunlight"],
            correct: 1
        }
    ],
    5: [ // Chapter 6
        {
            passage: "Katniss and Peeta's fiery entrance to the opening ceremony makes them the crowd favorites and 'the girl on fire'.",
            question: "What nickname does Katniss earn from the opening ceremony?",
            options: ["The Mockingjay", "The girl on fire", "The hunter", "The volunteer"],
            correct: 1
        },
        {
            passage: "At the Training Center, Katniss meets the other tributes and realizes how big and strong the Career tributes are.",
            question: "What does Katniss notice about the Career tributes?",
            options: ["They seem friendly", "How big and strong they are", "They look scared", "They ignore everyone"],
            correct: 1
        },
        {
            passage: "Haymitch advises Katniss and Peeta to train together and appear united, but hide their real skills.",
            question: "What strategy does Haymitch suggest?",
            options: ["Split up immediately", "Train together, appear united, but hide real skills", "Show off their best abilities", "Avoid all other tributes"],
            correct: 1
        },
        {
            passage: "Peeta reveals he can throw heavy objects with deadly accuracy, a skill from working in the bakery.",
            question: "What skill does Peeta reveal during training?",
            options: ["Sword fighting", "Throwing heavy objects with deadly accuracy", "Swimming", "Climbing trees"],
            correct: 1
        },
        {
            passage: "Katniss struggles with the camouflage station but excels at identifying edible plants and tracking.",
            question: "Which training stations does Katniss struggle with and excel at?",
            options: ["Excels at swords, struggles with plants", "Struggles with camouflage, excels at plants and tracking", "Excels at everything", "Struggles with everything"],
            correct: 1
        }
    ],
    6: [ // Chapter 7
        {
            passage: "During her private session with the Gamemakers, Katniss shoots an arrow at the apple in the roasted pig's mouth.",
            question: "What does Katniss shoot during her private session?",
            options: ["A target on the wall", "An arrow at the apple in the roasted pig's mouth", "One of the Gamemakers", "A practice dummy"],
            correct: 1
        },
        {
            passage: "Katniss shoots the arrow because the Gamemakers are ignoring her and paying attention to their feast instead.",
            question: "Why does Katniss shoot the apple?",
            options: ["To show off", "Because the Gamemakers are ignoring her", "It was an accident", "Haymitch told her to"],
            correct: 1
        },
        {
            passage: "After shooting the apple, Katniss sarcastically thanks the Gamemakers for their consideration and leaves.",
            question: "What does Katniss do after shooting the apple?",
            options: ["Apologizes immediately", "Sarcastically thanks them and leaves", "Starts crying", "Shoots another arrow"],
            correct: 1
        },
        {
            passage: "Katniss receives a training score of 11 out of 12, the highest score given to any tribute.",
            question: "What training score does Katniss receive?",
            options: ["8 out of 12", "11 out of 12, the highest score", "12 out of 12", "6 out of 12"],
            correct: 1
        },
        {
            passage: "Peeta receives a score of 8, which is respectable but not as high as Katniss's surprising 11.",
            question: "What score does Peeta receive?",
            options: ["11", "8, which is respectable", "12", "5"],
            correct: 1
        }
    ],
    7: [ // Chapter 8
        {
            passage: "During his interview with Caesar Flickerman, Peeta reveals he's been in love with Katniss since they were five.",
            question: "What does Peeta reveal during his interview?",
            options: ["His strategy for the Games", "He's been in love with Katniss since they were five", "He wants to go home", "He's afraid of the other tributes"],
            correct: 1
        },
        {
            passage: "Katniss is furious with Peeta's declaration, thinking it makes her look weak and romantic.",
            question: "How does Katniss react to Peeta's love declaration?",
            options: ["She's delighted", "She's furious, thinking it makes her look weak", "She doesn't care", "She's confused"],
            correct: 1
        },
        {
            passage: "Haymitch explains that Peeta's confession makes them 'star-crossed lovers' and will attract sponsors.",
            question: "How does Haymitch interpret Peeta's confession?",
            options: ["It was a mistake", "It makes them 'star-crossed lovers' and will attract sponsors", "It ruins their chances", "It doesn't matter"],
            correct: 1
        },
        {
            passage: "Cinna dresses Katniss in a flowing dress that makes her appear gentle and harmless for her interview.",
            question: "How does Cinna dress Katniss for her interview?",
            options: ["In armor to look fierce", "In a flowing dress to appear gentle and harmless", "In hunting clothes", "In fire again"],
            correct: 1
        },
        {
            passage: "Caesar Flickerman helps Katniss during her interview by asking easy questions and making her laugh.",
            question: "How does Caesar Flickerman help Katniss?",
            options: ["He asks very hard questions", "He asks easy questions and makes her laugh", "He ignores her", "He criticizes her"],
            correct: 1
        }
    ],
    8: [ // Chapter 9
        {
            passage: "On the morning of the Games, Katniss is taken to the arena launch pad beneath the Training Center.",
            question: "Where is Katniss taken on the morning of the Games?",
            options: ["Directly to the arena", "To the arena launch pad beneath the Training Center", "To see her family", "To meet with sponsors"],
            correct: 1
        },
        {
            passage: "Cinna gives Katniss her mockingjay pin and tells her to remember who the real enemy is.",
            question: "What does Cinna tell Katniss before she enters the arena?",
            options: ["Good luck", "Remember who the real enemy is", "Trust Peeta", "Find water first"],
            correct: 1
        },
        {
            passage: "The tributes rise up into the arena on metal plates, and Katniss sees the golden Cornucopia filled with supplies.",
            question: "What does Katniss see when she rises into the arena?",
            options: ["A forest", "The golden Cornucopia filled with supplies", "Other tributes fighting", "Her family"],
            correct: 1
        },
        {
            passage: "Haymitch had told Katniss to run away from the Cornucopia, but she sees a bow among the supplies.",
            question: "What advice had Haymitch given Katniss about the Cornucopia?",
            options: ["Fight for supplies", "Run away from the Cornucopia", "Hide inside it", "Team up with others"],
            correct: 1
        },
        {
            passage: "The gong sounds and the Hunger Games begin, with tributes racing toward the Cornucopia or fleeing into the wilderness.",
            question: "What happens when the gong sounds?",
            options: ["Everyone stays still", "The Hunger Games begin with tributes racing toward Cornucopia or fleeing", "The Games are postponed", "Everyone fights immediately"],
            correct: 1
        }
    ],

    // PART 2: CATCHING FIRE (Chapters 10-18)
    9: [ // Chapter 10 (Catching Fire Ch 1)
        {
            passage: "Katniss returns from hunting to find President Snow waiting in her house in Victor's Village.",
            question: "Who does Katniss find waiting in her house?",
            options: ["Haymitch", "President Snow", "Peeta", "Gale"],
            correct: 1
        },
        {
            passage: "President Snow tells Katniss that her defiance with the berries in the arena inspired uprisings in the districts.",
            question: "What does President Snow say Katniss's berry incident inspired?",
            options: ["More Hunger Games", "Uprisings in the districts", "New Capitol fashions", "Peace talks"],
            correct: 1
        },
        {
            passage: "Snow threatens to kill Gale and Katniss's family if she doesn't convince everyone she acted out of love, not defiance.",
            question: "What does Snow threaten if Katniss doesn't comply?",
            options: ["To arrest her", "To kill Gale and her family", "To destroy District 12", "To put her back in the Games"],
            correct: 1
        },
        {
            passage: "Snow leaves behind the scent of roses mixed with blood, which makes Katniss feel sick.",
            question: "What smell does Snow leave behind?",
            options: ["Perfume", "Roses mixed with blood", "Medicine", "Smoke"],
            correct: 1
        },
        {
            passage: "Katniss realizes she must convince the Capitol that she and Peeta are truly in love to protect her loved ones.",
            question: "What does Katniss realize she must do?",
            options: ["Run away", "Convince everyone she and Peeta are truly in love", "Start a rebellion", "Refuse to cooperate"],
            correct: 1
        }
    ],
    10: [ // Chapter 11 (Catching Fire Ch 2)
        {
            passage: "Katniss and Peeta begin the Victory Tour, visiting each district to honor the fallen tributes.",
            question: "What is the Victory Tour?",
            options: ["A celebration in the Capitol", "Visiting each district to honor fallen tributes", "A hunting trip", "A wedding tour"],
            correct: 1
        },
        {
            passage: "In District 11, an old man whistles the mockingjay tune and gives Katniss the three-finger salute before being shot.",
            question: "What happens to the old man in District 11?",
            options: ["He's rewarded", "He whistles the mockingjay tune, salutes, and is shot", "He runs away", "He's ignored"],
            correct: 1
        },
        {
            passage: "Katniss realizes her mockingjay pin has become a symbol of rebellion across the districts.",
            question: "What has Katniss's mockingjay pin become?",
            options: ["A fashion trend", "A symbol of rebellion", "Worthless", "A good luck charm"],
            correct: 1
        },
        {
            passage: "Peeta proposes to Katniss publicly in the Capitol, trying to help convince everyone their love is real.",
            question: "What does Peeta do in the Capitol to help their situation?",
            options: ["Confesses to rebellion", "Proposes to Katniss publicly", "Challenges Snow", "Refuses to speak"],
            correct: 1
        },
        {
            passage: "Despite their efforts, President Snow is not convinced and the rebellion continues to spread.",
            question: "What is the result of Katniss and Peeta's efforts?",
            options: ["Snow is completely convinced", "Snow is not convinced and rebellion continues", "Everything returns to normal", "They're immediately arrested"],
            correct: 1
        }
    ],
    11: [ // Chapter 12 (Catching Fire Ch 3)
        {
            passage: "Katniss discovers that new Head Peacekeeper Thread has brought brutal enforcement to District 12.",
            question: "What change has Thread brought to District 12?",
            options: ["More freedom", "Brutal enforcement", "Better food", "New jobs"],
            correct: 1
        },
        {
            passage: "Gale is caught poaching and publicly whipped by Thread as an example to others.",
            question: "What happens to Gale when he's caught poaching?",
            options: ["He's given a warning", "He's publicly whipped by Thread", "He's arrested", "He's fined"],
            correct: 1
        },
        {
            passage: "Katniss intervenes to stop Gale's whipping and is struck by Thread's whip herself.",
            question: "How does Katniss help Gale during his punishment?",
            options: ["She runs away", "She intervenes and is struck by the whip herself", "She calls for help", "She watches silently"],
            correct: 1
        },
        {
            passage: "Haymitch and Peeta help carry the unconscious Gale to safety and tend to his wounds.",
            question: "Who helps with Gale after his whipping?",
            options: ["Only Katniss", "Haymitch and Peeta", "The Peacekeepers", "No one"],
            correct: 1
        },
        {
            passage: "Katniss realizes the Capitol is cracking down on all districts, not just punishing her specifically.",
            question: "What does Katniss realize about the Capitol's actions?",
            options: ["They're only targeting her", "They're cracking down on all districts", "They're becoming more lenient", "They're only angry at District 12"],
            correct: 1
        }
    ],
    12: [ // Chapter 13 (Catching Fire Ch 4)
        {
            passage: "The 75th Hunger Games is announced as a Quarter Quell with special rules every 25 years.",
            question: "What makes the 75th Hunger Games special?",
            options: ["It's cancelled", "It's a Quarter Quell with special rules", "It's shorter", "It has more tributes"],
            correct: 1
        },
        {
            passage: "President Snow announces that tributes will be reaped from the existing pool of victors.",
            question: "What is the special rule for the 75th Games?",
            options: ["No weapons allowed", "Tributes reaped from existing victors", "Double the tributes", "Only volunteers"],
            correct: 1
        },
        {
            passage: "Since Katniss is the only living female victor from District 12, she will automatically return to the arena.",
            question: "Why must Katniss return to the arena?",
            options: ["She volunteered", "She's the only living female victor from District 12", "She was chosen randomly", "She broke the rules"],
            correct: 1
        },
        {
            passage: "Haymitch's name is drawn as the male tribute, but Peeta volunteers to take his place.",
            question: "How does Peeta end up as the male tribute?",
            options: ["His name was drawn", "He volunteers when Haymitch's name is drawn", "He was forced", "He was the only option"],
            correct: 1
        },
        {
            passage: "Katniss is devastated that she'll have to return to the arena and potentially kill Peeta.",
            question: "How does Katniss feel about returning to the arena with Peeta?",
            options: ["Excited", "Devastated about potentially having to kill him", "Confident", "Indifferent"],
            correct: 1
        }
    ],
    13: [ // Chapter 14 (Catching Fire Ch 5)
        {
            passage: "Katniss trains harder than ever, knowing she'll face experienced killers who are all previous victors.",
            question: "Why does Katniss train so intensely?",
            options: ["For fun", "She'll face experienced killers who are previous victors", "Haymitch told her to", "She's bored"],
            correct: 1
        },
        {
            passage: "Haymitch makes Katniss and Peeta promise to keep each other alive, even if it means their own death.",
            question: "What does Haymitch make them promise?",
            options: ["To win at any cost", "To keep each other alive, even if it means their own death", "To avoid all other tributes", "To find him first"],
            correct: 1
        },
        {
            passage: "At the tribute parade, Katniss and Peeta hold hands with the other victors in a show of unity.",
            question: "What do the victors do at the tribute parade?",
            options: ["Fight each other", "Hold hands in a show of unity", "Refuse to participate", "Give speeches"],
            correct: 1
        },
        {
            passage: "Cinna designs Katniss's wedding dress to transform into a mockingjay costume during her interview.",
            question: "What does Cinna's dress design do during the interview?",
            options: ["Catches fire", "Transforms into a mockingjay costume", "Changes colors", "Disappears"],
            correct: 1
        },
        {
            passage: "The mockingjay transformation angers the Capitol and makes Katniss an even stronger symbol of rebellion.",
            question: "What effect does the mockingjay costume have?",
            options: ["It's ignored", "It angers the Capitol and strengthens her as a rebellion symbol", "It amuses everyone", "It confuses people"],
            correct: 1
        }
    ],
    14: [ // Chapter 15 (Catching Fire Ch 6)
        {
            passage: "In the new arena, Katniss discovers it's designed like a clock with different dangers in each section.",
            question: "How is the new arena designed?",
            options: ["Like a maze", "Like a clock with different dangers in each section", "Like a forest", "Like a city"],
            correct: 1
        },
        {
            passage: "Katniss allies with Finnick from District 4, who knows Haymitch and proves he can be trusted.",
            question: "Who does Katniss ally with first in the arena?",
            options: ["Peeta", "Finnick from District 4", "Johanna", "Beetee"],
            correct: 1
        },
        {
            passage: "Peeta hits the force field around the arena and his heart stops, but Finnick revives him.",
            question: "What happens when Peeta hits the force field?",
            options: ["Nothing", "His heart stops but Finnick revives him", "He bounces off", "He disappears"],
            correct: 1
        },
        {
            passage: "The group realizes the arena's dangers change every hour according to the clock pattern.",
            question: "What do they discover about the arena's dangers?",
            options: ["They're random", "They change every hour according to a clock pattern", "They never change", "They only happen at night"],
            correct: 1
        },
        {
            passage: "Katniss begins to trust her new allies and work together to survive the arena's deadly traps.",
            question: "How does Katniss's attitude toward her allies change?",
            options: ["She becomes more suspicious", "She begins to trust them and work together", "She abandons them", "She tries to kill them"],
            correct: 1
        }
    ],
    15: [ // Chapter 16 (Catching Fire Ch 7)
        {
            passage: "Johanna, Beetee, and Wiress join Katniss's alliance, bringing technical knowledge and fierce fighting skills.",
            question: "Who joins Katniss's alliance?",
            options: ["The Career tributes", "Johanna, Beetee, and Wiress", "Only Beetee", "No one new"],
            correct: 1
        },
        {
            passage: "Wiress figures out the arena is a clock, but she's killed by Gloss before she can explain fully.",
            question: "What happens to Wiress after she discovers the clock pattern?",
            options: ["She escapes", "She's killed by Gloss before explaining fully", "She becomes the leader", "She hides"],
            correct: 1
        },
        {
            passage: "Beetee devises a plan to electrify the water using the lightning that strikes the tree at midnight.",
            question: "What is Beetee's plan?",
            options: ["Build a raft", "Electrify the water using lightning that strikes at midnight", "Hide until morning", "Fight the Careers"],
            correct: 1
        },
        {
            passage: "Katniss becomes suspicious that her allies are planning something they're not telling her.",
            question: "What does Katniss suspect about her allies?",
            options: ["They're loyal", "They're planning something they're not telling her", "They want to kill Peeta", "They're afraid"],
            correct: 1
        },
        {
            passage: "The remaining Career tributes are eliminated, leaving only Katniss's alliance in the arena.",
            question: "What happens to the Career tributes?",
            options: ["They win", "They're eliminated, leaving only Katniss's alliance", "They join Katniss", "They escape"],
            correct: 1
        }
    ],
    16: [ // Chapter 17 (Catching Fire Ch 8)
        {
            passage: "Katniss realizes her allies have been working to keep her and Peeta alive for a secret plan.",
            question: "What does Katniss realize about her allies' motives?",
            options: ["They want to kill her", "They've been working to keep her and Peeta alive for a secret plan", "They're using her", "They don't trust her"],
            correct: 1
        },
        {
            passage: "Beetee's wire breaks during the execution of the plan, and Katniss must improvise.",
            question: "What goes wrong with Beetee's plan?",
            options: ["The lightning doesn't come", "The wire breaks and Katniss must improvise", "Peeta refuses to help", "The Careers return"],
            correct: 1
        },
        {
            passage: "Katniss ties the wire to one of her arrows and shoots it into the force field during the lightning strike.",
            question: "How does Katniss adapt Beetee's plan?",
            options: ["She abandons it", "She ties wire to an arrow and shoots it into the force field", "She runs away", "She calls for help"],
            correct: 1
        },
        {
            passage: "The force field explodes and the arena begins to collapse, ending the Quarter Quell games.",
            question: "What happens when Katniss shoots the force field?",
            options: ["Nothing", "The force field explodes and the arena collapses", "She's electrocuted", "The other tributes die"],
            correct: 1
        },
        {
            passage: "Katniss loses consciousness as the arena is destroyed, not knowing if her plan worked.",
            question: "What happens to Katniss after the arena explodes?",
            options: ["She celebrates", "She loses consciousness, not knowing if her plan worked", "She finds Peeta", "She escapes immediately"],
            correct: 1
        }
    ],
    17: [ // Chapter 18 (Catching Fire Ch 9)
        {
            passage: "Katniss wakes up in a hovercraft and discovers she's been rescued by rebels from District 13.",
            question: "Where does Katniss wake up?",
            options: ["In the Capitol", "In a rebel hovercraft from District 13", "Back in District 12", "In a hospital"],
            correct: 1
        },
        {
            passage: "Haymitch reveals he was part of the rebel plan to rescue Katniss and make her the symbol of revolution.",
            question: "What does Haymitch reveal about the rescue?",
            options: ["It was an accident", "He was part of the rebel plan to make Katniss a revolution symbol", "He knew nothing about it", "He opposed it"],
            correct: 1
        },
        {
            passage: "Katniss learns that Peeta was captured by the Capitol when the arena was destroyed.",
            question: "What happened to Peeta during the rescue?",
            options: ["He escaped with Katniss", "He was captured by the Capitol", "He died in the arena", "He's hiding in District 12"],
            correct: 1
        },
        {
            passage: "District 12 has been completely destroyed by the Capitol in retaliation for the arena breakout.",
            question: "What happened to District 12?",
            options: ["Nothing", "It was completely destroyed by the Capitol", "It was liberated", "It was evacuated safely"],
            correct: 1
        },
        {
            passage: "Katniss realizes she's now truly at war with the Capitol and must become the Mockingjay.",
            question: "What does Katniss realize about her situation?",
            options: ["She can go home", "She's truly at war with the Capitol and must become the Mockingjay", "Everything is back to normal", "She can hide safely"],
            correct: 1
        }
    ],

    // PART 3: MOCKINGJAY (Chapters 19-27)
    18: [ // Chapter 19 (Mockingjay Ch 1)
        {
            passage: "Katniss is in District 13, an underground military complex that survived the Capitol's bombing.",
            question: "Where is Katniss now living?",
            options: ["The Capitol", "District 13, an underground military complex", "District 4", "The ruins of District 12"],
            correct: 1
        },
        {
            passage: "President Alma Coin leads District 13 and wants Katniss to become the Mockingjay, symbol of the rebellion.",
            question: "Who leads District 13 and what do they want from Katniss?",
            options: ["Haymitch leads, wants her to hide", "President Coin leads, wants her to become the Mockingjay", "Snow leads from there", "No one is in charge"],
            correct: 1
        },
        {
            passage: "Katniss's mother and sister Prim were rescued from District 12 before it was bombed.",
            question: "What happened to Katniss's family?",
            options: ["They died in the bombing", "They were rescued before the bombing", "They're still in District 12", "They're in the Capitol"],
            correct: 1
        },
        {
            passage: "Katniss sees propaganda videos of Peeta, apparently unharmed, urging the districts to stop fighting.",
            question: "What does Katniss see of Peeta in the videos?",
            options: ["He looks tortured", "He appears unharmed, urging districts to stop fighting", "He's escaped", "He's dead"],
            correct: 1
        },
        {
            passage: "Katniss agrees to be the Mockingjay only if the other captured victors, including Peeta, are rescued and pardoned.",
            question: "What are Katniss's conditions for becoming the Mockingjay?",
            options: ["She wants to return home", "The captured victors must be rescued and pardoned", "She wants money", "She refuses completely"],
            correct: 1
        }
    ],
    19: [ // Chapter 20 (Mockingjay Ch 2)
        {
            passage: "Katniss begins filming propaganda videos as the Mockingjay to inspire the districts to rebel.",
            question: "What does Katniss do as the Mockingjay?",
            options: ["Fights battles", "Films propaganda videos to inspire rebellion", "Hides underground", "Negotiates with Snow"],
            correct: 1
        },
        {
            passage: "Gale has become a soldier in District 13's army and helps design weapons and battle strategies.",
            question: "What is Gale's role in District 13?",
            options: ["He's a prisoner", "He's a soldier who helps design weapons and strategies", "He's a medic", "He's a teacher"],
            correct: 1
        },
        {
            passage: "Katniss visits the ruins of District 12 and finds her old home destroyed but recovers her father's bow.",
            question: "What does Katniss find when she visits District 12?",
            options: ["Everything intact", "Ruins, but she recovers her father's bow", "Nothing left", "People hiding"],
            correct: 1
        },
        {
            passage: "Buttercup, Prim's cat, is one of the few survivors found in the ruins of District 12.",
            question: "Who is one of the few survivors found in District 12's ruins?",
            options: ["Haymitch", "Buttercup, Prim's cat", "Peeta's father", "Mayor Undersee"],
            correct: 1
        },
        {
            passage: "The propaganda videos showing Katniss in the ruins help motivate more districts to join the rebellion.",
            question: "What effect do the propaganda videos have?",
            options: ["They discourage people", "They motivate more districts to join the rebellion", "They're ignored", "They anger District 13"],
            correct: 1
        }
    ],
    20: [ // Chapter 21 (Mockingjay Ch 3)
        {
            passage: "District 13 launches a rescue mission to save Peeta and the other captured victors from the Capitol.",
            question: "What mission does District 13 launch?",
            options: ["Attack the Capitol", "Rescue mission to save Peeta and other victors", "Evacuate more districts", "Negotiate peace"],
            correct: 1
        },
        {
            passage: "The rescue mission succeeds, but Peeta has been tortured and brainwashed using tracker jacker venom.",
            question: "What condition is Peeta in when rescued?",
            options: ["Perfectly fine", "Tortured and brainwashed using tracker jacker venom", "Dead", "Escaped on his own"],
            correct: 1
        },
        {
            passage: "Peeta tries to strangle Katniss when he sees her, believing she's a mutt created by the Capitol.",
            question: "How does Peeta react when he first sees Katniss after rescue?",
            options: ["He hugs her", "He tries to strangle her, thinking she's a Capitol mutt", "He ignores her", "He cries"],
            correct: 1
        },
        {
            passage: "Dr. Aurelius explains that Peeta's memories have been altered to make him see Katniss as the enemy.",
            question: "What has happened to Peeta's memories?",
            options: ["They're perfectly intact", "They've been altered to make him see Katniss as the enemy", "They're completely gone", "Only good memories remain"],
            correct: 1
        },
        {
            passage: "Katniss is devastated that the Capitol has turned the boy with the bread into someone who wants to kill her.",
            question: "How does Katniss feel about Peeta's condition?",
            options: ["Relieved", "Devastated that he now wants to kill her", "Angry at him", "Hopeful for quick recovery"],
            correct: 1
        }
    ],
    21: [ // Chapter 22 (Mockingjay Ch 4)
        {
            passage: "The rebels begin planning an assault on the Capitol, with Katniss assigned to a special Star Squad.",
            question: "What military operation do the rebels begin planning?",
            options: ["Retreat to safety", "An assault on the Capitol with Katniss in Star Squad", "Peaceful negotiations", "Hiding underground"],
            correct: 1
        },
        {
            passage: "Peeta slowly begins to recover some real memories, but struggles to distinguish them from false ones.",
            question: "How is Peeta's recovery progressing?",
            options: ["He's completely cured", "He slowly recovers real memories but struggles with false ones", "He gets worse", "No progress at all"],
            correct: 1
        },
        {
            passage: "Gale and Beetee design bombs that appear to be rescue attempts but explode when people try to help victims.",
            question: "What type of weapons do Gale and Beetee design?",
            options: ["Simple explosives", "Bombs disguised as rescue attempts", "Guns", "Poison gas"],
            correct: 1
        },
        {
            passage: "Katniss begins to question whether the rebellion is becoming as ruthless as the Capitol itself.",
            question: "What does Katniss begin to question about the rebellion?",
            options: ["If they can win", "Whether it's becoming as ruthless as the Capitol", "If she should be involved", "If District 13 is safe"],
            correct: 1
        },
        {
            passage: "President Coin assigns Peeta to Katniss's Star Squad, despite his unstable mental condition.",
            question: "What assignment does President Coin give Peeta?",
            options: ["Medical duty", "Assignment to Katniss's Star Squad despite his condition", "Stay in District 13", "Work with Dr. Aurelius"],
            correct: 1
        }
    ],
    22: [ // Chapter 23 (Mockingjay Ch 5)
        {
            passage: "Star Squad enters the Capitol and faces deadly traps called 'pods' hidden throughout the city.",
            question: "What dangers does Star Squad face in the Capitol?",
            options: ["Only soldiers", "Deadly traps called 'pods' hidden throughout the city", "Nothing dangerous", "Wild animals"],
            correct: 1
        },
        {
            passage: "Squad member Boggs is killed by a pod explosion, making Katniss the new squad leader.",
            question: "What happens to Boggs and how does it affect the squad?",
            options: ["He's captured", "He's killed by a pod, making Katniss the new leader", "He deserts", "He's wounded"],
            correct: 1
        },
        {
            passage: "Peeta has an episode and nearly kills Mitchell before the squad restrains him.",
            question: "What happens during one of Peeta's episodes?",
            options: ["He remembers everything", "He nearly kills Mitchell before being restrained", "He runs away", "He helps everyone"],
            correct: 1
        },
        {
            passage: "Katniss realizes that Coin sent Peeta to the squad hoping he would kill Katniss.",
            question: "What does Katniss realize about Coin's motives?",
            options: ["Coin wants to help", "Coin sent Peeta hoping he would kill Katniss", "Coin trusts Peeta completely", "Coin made a mistake"],
            correct: 1
        },
        {
            passage: "The squad goes underground into the sewers to avoid the increasing number of deadly pods.",
            question: "Where does the squad go to avoid the pods?",
            options: ["Back to District 13", "Underground into the sewers", "To a safe house", "To the presidential mansion"],
            correct: 1
        }
    ],
    23: [ // Chapter 24 (Mockingjay Ch 6)
        {
            passage: "In the sewers, the squad is attacked by deadly lizard mutts created by the Capitol.",
            question: "What attacks the squad in the sewers?",
            options: ["Capitol soldiers", "Deadly lizard mutts created by the Capitol", "Wild animals", "Poisonous gas"],
            correct: 1
        },
        {
            passage: "Several squad members are killed by the mutts, including Finnick, who sacrifices himself for the others.",
            question: "What happens to Finnick during the mutt attack?",
            options: ["He escapes safely", "He's killed sacrificing himself for the others", "He's captured", "He's wounded"],
            correct: 1
        },
        {
            passage: "Katniss and the remaining squad members reach the surface and disguise themselves as Capitol refugees.",
            question: "How do the survivors hide after escaping the sewers?",
            options: ["They surrender", "They disguise themselves as Capitol refugees", "They fight openly", "They hide in buildings"],
            correct: 1
        },
        {
            passage: "Tigris, a former stylist turned into a tiger-like creature, helps hide the squad in her shop.",
            question: "Who helps hide the squad and what is special about her?",
            options: ["A normal citizen", "Tigris, a former stylist turned tiger-like", "A Capitol guard", "President Snow"],
            correct: 1
        },
        {
            passage: "Katniss learns that rebel forces are closing in on the Capitol and the war is nearly over.",
            question: "What does Katniss learn about the war's progress?",
            options: ["The rebels are losing", "Rebel forces are closing in and the war is nearly over", "It will last years more", "The Capitol is winning"],
            correct: 1
        }
    ],
    24: [ // Chapter 25 (Mockingjay Ch 7)
        {
            passage: "Snow announces that he's bringing Capitol children to his mansion as human shields against the rebels.",
            question: "What does Snow do to protect himself?",
            options: ["Surrenders immediately", "Brings Capitol children as human shields to his mansion", "Flees the city", "Negotiates peace"],
            correct: 1
        },
        {
            passage: "Katniss infiltrates the crowd of supposed medics heading to help the injured children.",
            question: "How does Katniss approach Snow's mansion?",
            options: ["She attacks directly", "She infiltrates the crowd of medics helping children", "She waits outside", "She gives up"],
            correct: 1
        },
        {
            passage: "Bombs drop on the children, and when medics including Prim rush to help, a second wave of bombs explodes.",
            question: "What happens when medics try to help the injured children?",
            options: ["They succeed in helping", "Second wave of bombs explodes when they arrive", "Nothing happens", "Capitol soldiers stop them"],
            correct: 1
        },
        {
            passage: "Prim is killed in the bombing, dying in Katniss's arms as the parachutes fall like snow.",
            question: "What happens to Prim during the bombing?",
            options: ["She escapes safely", "She's killed in the bombing, dying in Katniss's arms", "She's wounded but survives", "She's captured"],
            correct: 1
        },
        {
            passage: "Katniss realizes the bombs that killed Prim were designed like the ones Gale and Beetee created.",
            question: "What does Katniss realize about the bombs that killed Prim?",
            options: ["They were Capitol bombs", "They were designed like Gale and Beetee's bombs", "They were accidental", "They were old weapons"],
            correct: 1
        }
    ],
    25: [ // Chapter 26 (Mockingjay Ch 8)
        {
            passage: "After Prim's death, Katniss falls into a deep depression and is unable to function.",
            question: "How does Prim's death affect Katniss?",
            options: ["She becomes stronger", "She falls into deep depression and can't function", "She seeks immediate revenge", "She celebrates the war's end"],
            correct: 1
        },
        {
            passage: "President Snow is captured and scheduled for execution, with Katniss chosen to carry out the execution.",
            question: "What happens to President Snow and what is Katniss's role?",
            options: ["He escapes", "He's captured and Katniss is chosen to execute him", "He surrenders peacefully", "He's already dead"],
            correct: 1
        },
        {
            passage: "Before his execution, Snow tells Katniss that Coin ordered the bombing that killed Prim, not him.",
            question: "What does Snow tell Katniss before his execution?",
            options: ["He confesses to killing Prim", "Coin ordered the bombing that killed Prim, not him", "He apologizes for everything", "He begs for mercy"],
            correct: 1
        },
        {
            passage: "At Snow's execution, Katniss shoots her arrow at President Coin instead, killing her.",
            question: "What does Katniss do at Snow's execution?",
            options: ["She executes Snow as planned", "She shoots President Coin instead", "She refuses to shoot", "She runs away"],
            correct: 1
        },
        {
            passage: "Snow dies laughing as chaos erupts and the crowd realizes what Katniss has done.",
            question: "How does Snow react to Katniss killing Coin?",
            options: ["He begs for his life", "He dies laughing as chaos erupts", "He tries to escape", "He's surprised"],
            correct: 1
        }
    ],
    26: [ // Chapter 27 (Mockingjay Ch 9)
        {
            passage: "Katniss is arrested for killing Coin and awaits trial, but the interim government eventually pardons her.",
            question: "What happens to Katniss after killing Coin?",
            options: ["She's executed immediately", "She's arrested but eventually pardoned", "She escapes", "She becomes president"],
            correct: 1
        },
        {
            passage: "Katniss returns to District 12, which is slowly being rebuilt by returning survivors.",
            question: "Where does Katniss go after being pardoned?",
            options: ["She stays in the Capitol", "She returns to District 12, which is being rebuilt", "She goes to District 13", "She travels the world"],
            correct: 1
        },
        {
            passage: "Peeta also returns to District 12 and slowly begins to recover his real memories of Katniss.",
            question: "What happens with Peeta after the war?",
            options: ["He stays in the Capitol", "He returns to District 12 and slowly recovers his memories", "He never recovers", "He moves away"],
            correct: 1
        },
        {
            passage: "Gale gets a fancy job in District 2 and doesn't return to District 12, ending his relationship with Katniss.",
            question: "What becomes of Gale after the war?",
            options: ["He stays with Katniss", "He gets a job in District 2 and doesn't return", "He dies in the war", "He becomes a farmer"],
            correct: 1
        },
        {
            passage: "Years later, Katniss and Peeta have married and have two children, slowly healing from their trauma.",
            question: "How does the story end for Katniss and Peeta?",
            options: ["They remain alone", "They marry and have two children, slowly healing", "They move to different districts", "They become politicians"],
            correct: 1
        }
    ]
};

        // ì±… ìƒì„¸ ì •ë³´ í‘œì‹œ
        function showBookDetail() {
            document.getElementById('book-detail-screen').style.display = 'block';
            document.getElementById('learning-screen').style.display = 'none';
            document.getElementById('result-screen').style.display = 'none';
            generateChapterGrid();
            updateProgress();
        }

        // ì±•í„° ê·¸ë¦¬ë“œ ìƒì„± (3ë¶€ êµ¬ì¡°ë¡œ)
        function generateChapterGrid() {
            const container = document.getElementById('chapters-container');
            container.innerHTML = '';

            bookData.parts.forEach((part, partIndex) => {
                // íŒŒíŠ¸ í—¤ë” ìƒì„±
                const partHeader = document.createElement('div');
                partHeader.className = 'part-header';
                partHeader.textContent = `${part.title} - ${part.description}`;
                container.appendChild(partHeader);

                // í•´ë‹¹ íŒŒíŠ¸ì˜ ì±•í„° ê·¸ë¦¬ë“œ ìƒì„±
                const grid = document.createElement('div');
                grid.className = 'chapters-grid';

                part.chapters.forEach(chapterNum => {
                    const chapterIndex = chapterNum - 1;
                    const chapter = bookData.chapterList[chapterIndex];

                    const chapterCard = document.createElement('div');
                    chapterCard.className = `chapter-card ${chapter.status}`;

                    chapterCard.innerHTML = `
                        <div class="chapter-header">
                            <div class="chapter-info">
                                <h4>${chapter.title}</h4>
                                <p>${chapter.description} (${chapter.questionCount}ë¬¸ì œ)</p>
                            </div>
                            <div class="chapter-status ${chapter.status}">
                                ${chapter.status === 'completed' ? 'âœ… ì™„ë£Œ' :
                                  chapter.status === 'current' ? 'ğŸ“– ì§„í–‰ì¤‘' : 'ğŸ”’ ì ê¹€'}
                            </div>
                        </div>
                        <div class="chapter-actions">
                            <button class="chapter-btn audio-btn" onclick="playChapterAudio(${chapterIndex})"
                                    ${chapter.status === 'locked' ? 'disabled' : ''}>
                                ğŸ§ ì˜¤ë””ì˜¤
                            </button>
                            <button class="chapter-btn quiz-btn" onclick="startLearning(${chapterIndex})"
                                    ${chapter.status === 'locked' ? 'disabled' : ''}>
                                ğŸ“ ë¬¸ì œí’€ê¸°
                            </button>
                        </div>
                    `;

                    grid.appendChild(chapterCard);
                });

                container.appendChild(grid);
            });
        }

        // ì§„ë„ ì—…ë°ì´íŠ¸
        function updateProgress() {
            const completedChapters = bookData.chapterList.filter(chapter => chapter.status === 'completed').length;
            const progressPercent = Math.round((completedChapters / bookData.chapters) * 100);
            document.getElementById('progress-value').textContent = `${progressPercent}%`;
        }

        // í•™ìŠµ ì‹œì‘
        function startLearning(chapterIndex) {
            if (bookData.chapterList[chapterIndex].status === 'locked') return;

            currentChapterIndex = chapterIndex;
            currentQuestionIndex = 0;
            userAnswers = [];
            questions = questionsData[chapterIndex] || [];

            if (questions.length === 0) {
                alert('ì´ ì±•í„°ì˜ ë¬¸ì œê°€ ì¤€ë¹„ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
                return;
            }

            document.getElementById('book-detail-screen').style.display = 'none';
            document.getElementById('learning-screen').style.display = 'block';
            document.getElementById('result-screen').style.display = 'none';

            const chapter = bookData.chapterList[chapterIndex];
            document.getElementById('learning-title').textContent = chapter.title;
            document.getElementById('learning-chapter-breadcrumb').textContent = chapter.title;

            showQuestion();
        }

        // ë¬¸ì œ í‘œì‹œ
        function showQuestion() {
            if (currentQuestionIndex >= questions.length) {
                submitAnswers();
                return;
            }

            const question = questions[currentQuestionIndex];
            const container = document.getElementById('question-container');

            container.innerHTML = `
                <div class="passage">${question.passage}</div>
                <div class="question-text">${question.question}</div>
                <div class="options">
                    ${question.options.map((option, index) =>
                        `<div class="option" onclick="selectOption(${index})" data-index="${index}">
                            ${String.fromCharCode(65 + index)}. ${option}
                        </div>`
                    ).join('')}
                </div>
            `;

            // ì§„ë„ ë°” ì—…ë°ì´íŠ¸
            const progressPercent = ((currentQuestionIndex + 1) / questions.length) * 100;
            document.getElementById('learning-progress-bar').style.width = `${progressPercent}%`;
            document.getElementById('learning-progress-text').textContent = `ë¬¸ì œ ${currentQuestionIndex + 1} / ${questions.length}`;

            // ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸
            document.getElementById('prev-btn').disabled = currentQuestionIndex === 0;
            document.getElementById('next-btn').style.display = currentQuestionIndex === questions.length - 1 ? 'none' : 'inline-block';
            document.getElementById('submit-btn').style.display = currentQuestionIndex === questions.length - 1 ? 'inline-block' : 'none';

            // ì´ì „ ë‹µë³€ì´ ìˆë‹¤ë©´ í‘œì‹œ
            if (userAnswers[currentQuestionIndex] !== undefined) {
                const selectedOption = container.querySelector(`[data-index="${userAnswers[currentQuestionIndex]}"]`);
                if (selectedOption) {
                    selectedOption.classList.add('selected');
                }
            }
        }

        // ì˜µì…˜ ì„ íƒ
        function selectOption(index) {
            // ê¸°ì¡´ ì„ íƒ ì œê±°
            document.querySelectorAll('.option').forEach(option => {
                option.classList.remove('selected');
            });

            // ìƒˆ ì„ íƒ ì¶”ê°€
            document.querySelector(`[data-index="${index}"]`).classList.add('selected');
            userAnswers[currentQuestionIndex] = index;
        }

        // ë‹¤ìŒ ë¬¸ì œ
        function nextQuestion() {
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                showQuestion();
            }
        }

        // ì´ì „ ë¬¸ì œ
        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                showQuestion();
            }
        }

        // ë‹µì•ˆ ì œì¶œ
        function submitAnswers() {
            let correctCount = 0;
            for (let i = 0; i < questions.length; i++) {
                if (userAnswers[i] === questions[i].correct) {
                    correctCount++;
                }
            }

            const score = Math.round((correctCount / questions.length) * 100);

            // ì±•í„° ìƒíƒœ ì—…ë°ì´íŠ¸
            if (score >= 70) { // 70ì  ì´ìƒì´ë©´ í†µê³¼
                bookData.chapterList[currentChapterIndex].status = 'completed';

                // ë‹¤ìŒ ì±•í„° ì ê¸ˆ í•´ì œ
                if (currentChapterIndex + 1 < bookData.chapterList.length) {
                    if (bookData.chapterList[currentChapterIndex + 1].status === 'locked') {
                        bookData.chapterList[currentChapterIndex + 1].status = 'current';
                    }
                }
            }

            showResult(correctCount, score);
        }

        // ê²°ê³¼ í‘œì‹œ
        function showResult(correctCount, score) {
            document.getElementById('learning-screen').style.display = 'none';
            document.getElementById('result-screen').style.display = 'block';

            document.getElementById('score-circle').textContent = `${score}%`;
            document.getElementById('total-questions').textContent = `${questions.length}ë¬¸ì œ`;
            document.getElementById('correct-answers').textContent = `${correctCount}ë¬¸ì œ`;
            document.getElementById('wrong-answers').textContent = `${questions.length - correctCount}ë¬¸ì œ`;
            document.getElementById('final-score').textContent = `${score}ì `;

            let message = '';
            let circleColor = '';

            if (score >= 90) {
                message = 'ğŸŒŸ ì™„ë²½í•©ë‹ˆë‹¤!';
                circleColor = 'linear-gradient(45deg, #1a1a1a, #8B0000)';
            } else if (score >= 80) {
                message = 'ğŸ‰ í›Œë¥­í•´ìš”!';
                circleColor = 'linear-gradient(45deg, #1a1a1a, #8B0000)';
            } else if (score >= 70) {
                message = 'ğŸ‘ ì˜í–ˆì–´ìš”!';
                circleColor = 'linear-gradient(45deg, #1a1a1a, #8B0000)';
            } else {
                message = 'ğŸ’ª ë‹¤ì‹œ ë„ì „í•´ë³´ì„¸ìš”!';
                circleColor = 'linear-gradient(45deg, #ff9800, #f57c00)';
            }

            document.getElementById('result-message').textContent = message;
            document.getElementById('score-circle').style.background = circleColor;
        }

        // ì±•í„° ë‹¤ì‹œ í’€ê¸°
        function retryChapter() {
            startLearning(currentChapterIndex);
        }

        // ë‹¤ìŒ ì±•í„°
        function nextChapter() {
            if (currentChapterIndex + 1 < bookData.chapterList.length) {
                if (bookData.chapterList[currentChapterIndex + 1].status !== 'locked') {
                    startLearning(currentChapterIndex + 1);
                } else {
                    showBookDetail();
                }
            } else {
                showBookDetail();
            }
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        window.addEventListener('DOMContentLoaded', function() {
            showBookDetail();
        });

        // í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('learning-screen').style.display === 'block') {
                if (e.key === 'ArrowLeft') {
                    previousQuestion();
                } else if (e.key === 'ArrowRight') {
                    nextQuestion();
                } else if (e.key >= '1' && e.key <= '4') {
                    const index = parseInt(e.key) - 1;
                    if (index < questions[currentQuestionIndex]?.options.length) {
                        selectOption(index);
                    }
                }
            }

            if (e.key === 'Escape') {
                closeAudioModal();
            }
        });

        // ì˜¤ë””ì˜¤ í”Œë ˆì´ì–´ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        document.addEventListener('DOMContentLoaded', function() {
            const audioPlayer = document.getElementById('audio-player');

            audioPlayer.addEventListener('play', function() {
                document.querySelector('.play-pause-btn').textContent = 'â¸ï¸ ì¼ì‹œì •ì§€';
            });

            audioPlayer.addEventListener('pause', function() {
                document.querySelector('.play-pause-btn').textContent = 'â–¶ï¸ ì¬ìƒ';
            });

            audioPlayer.addEventListener('ended', function() {
                document.querySelector('.play-pause-btn').textContent = 'â–¶ï¸ ì¬ìƒ';
            });
        });
    </script>
</body>
</html>