<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë ˆë²¨í…ŒìŠ¤íŠ¸ ê²°ê³¼ - ìˆ˜ë¦¬ë”©ì–´í•™ì›</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            padding: 20px;
        }

        .result-container {
            max-width: 1000px;
            margin: 0 auto;
        }

        .result-header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 25px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .result-icon {
            font-size: 4rem;
            margin-bottom: 20px;
        }

        .result-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 15px;
            color: #333;
        }

        .student-info {
            font-size: 1.2rem;
            color: #666;
            margin-bottom: 10px;
        }

        .book-info {
            font-size: 1.1rem;
            color: #667eea;
            font-weight: 600;
        }

        .score-section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 25px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
        }

        .score-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .score-card {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .score-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .score-value {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .score-label {
            font-size: 1rem;
            color: #666;
            font-weight: 500;
        }

        .grade-display {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border-radius: 50%;
            width: 120px;
            height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            font-weight: 700;
            margin: 0 auto 20px;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        }

        .pass-status {
            font-size: 1.5rem;
            font-weight: 600;
            padding: 15px 30px;
            border-radius: 25px;
            margin: 20px auto;
            max-width: 300px;
            text-align: center;
        }

        .pass-status.passed {
            background: linear-gradient(45deg, #28a745, #20c997);
            color: white;
        }

        .pass-status.failed {
            background: linear-gradient(45deg, #dc3545, #c82333);
            color: white;
        }

        .chapter-analysis {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 25px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
        }

        .section-title {
            font-size: 1.8rem;
            font-weight: 600;
            margin-bottom: 25px;
            color: #333;
            text-align: center;
        }

        .chapter-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 20px;
        }

        .chapter-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            border: 3px solid transparent;
            transition: all 0.3s ease;
        }

        .chapter-card.excellent {
            border-color: #28a745;
            background: linear-gradient(135deg, #28a74510, #20c99710);
        }

        .chapter-card.good {
            border-color: #667eea;
            background: linear-gradient(135deg, #667eea10, #764ba210);
        }

        .chapter-card.needs-work {
            border-color: #ffc107;
            background: linear-gradient(135deg, #ffc10710, #fd7e1410);
        }

        .chapter-card.poor {
            border-color: #dc3545;
            background: linear-gradient(135deg, #dc354510, #c8233310);
        }

        .chapter-number {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 10px;
            color: #333;
        }

        .chapter-score {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .chapter-detail {
            font-size: 0.9rem;
            color: #666;
        }

        .recommendations {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 25px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
        }

        .recommendation-text {
            font-size: 1.1rem;
            line-height: 1.6;
            color: #333;
            margin-bottom: 25px;
            text-align: center;
        }

        .strengths-weaknesses {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .strength-list, .weakness-list {
            background: white;
            border-radius: 15px;
            padding: 25px;
        }

        .strength-list {
            border-left: 4px solid #28a745;
        }

        .weakness-list {
            border-left: 4px solid #dc3545;
        }

        .list-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .list-item {
            background: #f8f9fa;
            padding: 10px 15px;
            border-radius: 8px;
            margin-bottom: 8px;
            font-size: 0.95rem;
        }

        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .action-btn {
            padding: 15px 30px;
            border: none;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            min-width: 160px;
            text-align: center;
        }

        .primary-btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
        }

        .secondary-btn {
            background: #6c757d;
            color: white;
        }

        .success-btn {
            background: linear-gradient(45deg, #28a745, #20c997);
            color: white;
        }

        .action-btn:hover {
            transform: translateY(-2px) scale(1.02);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }

        .test-details {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 25px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.1);
        }

        .detail-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .detail-item {
            text-align: center;
            padding: 15px;
        }

        .detail-label {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 5px;
        }

        .detail-value {
            font-size: 1.2rem;
            font-weight: 600;
            color: #333;
        }

        @media (max-width: 768px) {
            .result-container {
                padding: 10px;
            }

            .result-header, .score-section, .chapter-analysis, .recommendations {
                padding: 25px 20px;
            }

            .strengths-weaknesses {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .action-buttons {
                flex-direction: column;
                align-items: center;
            }

            .grade-display {
                width: 100px;
                height: 100px;
                font-size: 2.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="result-container">
        <!-- ê²°ê³¼ í—¤ë” -->
        <div class="result-header">
            <div class="result-icon" id="result-icon">ğŸ‰</div>
            <h1 class="result-title" id="result-title">í…ŒìŠ¤íŠ¸ ì™„ë£Œ!</h1>
            <div class="student-info" id="student-info">í™ê¸¸ë™ë‹˜ì˜ ë ˆë²¨í…ŒìŠ¤íŠ¸ ê²°ê³¼</div>
            <div class="book-info" id="book-info">The Book Thief by Markus Zusak</div>
        </div>

        <!-- ì ìˆ˜ ì„¹ì…˜ -->
        <div class="score-section">
            <div class="grade-display" id="grade-display">B+</div>
            <div class="pass-status passed" id="pass-status">ğŸŠ í•©ê²©! ì¶•í•˜í•©ë‹ˆë‹¤!</div>

            <div class="score-grid">
                <div class="score-card">
                    <div class="score-value" id="correct-answers" style="color: #28a745;">48</div>
                    <div class="score-label">ì •ë‹µ ìˆ˜</div>
                </div>
                <div class="score-card">
                    <div class="score-value" id="total-questions" style="color: #667eea;">60</div>
                    <div class="score-label">ì´ ë¬¸ì œ</div>
                </div>
                <div class="score-card">
                    <div class="score-value" id="percentage" style="color: #fd7e14;">80%</div>
                    <div class="score-label">ì •ë‹µë¥ </div>
                </div>
                <div class="score-card">
                    <div class="score-value" id="time-spent" style="color: #6f42c1;">75ë¶„</div>
                    <div class="score-label">ì†Œìš” ì‹œê°„</div>
                </div>
            </div>
        </div>

        <!-- í…ŒìŠ¤íŠ¸ ìƒì„¸ ì •ë³´ -->
        <div class="test-details">
            <div class="detail-grid">
                <div class="detail-item">
                    <div class="detail-label">í…ŒìŠ¤íŠ¸ ë‚ ì§œ</div>
                    <div class="detail-value" id="test-date">2024.06.18</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">ë ˆë²¨</div>
                    <div class="detail-value" id="test-level">Level 5</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">í•©ê²© ê¸°ì¤€</div>
                    <div class="detail-value">80% ì´ìƒ</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">ë“±ê¸‰</div>
                    <div class="detail-value" id="final-grade">B+</div>
                </div>
            </div>
        </div>

        <!-- ì±•í„°ë³„ ë¶„ì„ -->
        <div class="chapter-analysis">
            <h2 class="section-title">ğŸ“Š ì±•í„°ë³„ ì„±ê³¼ ë¶„ì„</h2>
            <div class="chapter-grid" id="chapter-grid">
                <div class="chapter-card excellent">
                    <div class="chapter-number">Chapter 1</div>
                    <div class="chapter-score" style="color: #28a745;">11/12</div>
                    <div class="chapter-detail">92% - ìš°ìˆ˜</div>
                </div>
                <div class="chapter-card good">
                    <div class="chapter-number">Chapter 2</div>
                    <div class="chapter-score" style="color: #667eea;">10/12</div>
                    <div class="chapter-detail">83% - ì–‘í˜¸</div>
                </div>
                <div class="chapter-card good">
                    <div class="chapter-number">Chapter 3</div>
                    <div class="chapter-score" style="color: #667eea;">9/12</div>
                    <div class="chapter-detail">75% - ì–‘í˜¸</div>
                </div>
                <div class="chapter-card needs-work">
                    <div class="chapter-number">Chapter 4</div>
                    <div class="chapter-score" style="color: #ffc107;">9/12</div>
                    <div class="chapter-detail">75% - ë³´ì™„í•„ìš”</div>
                </div>
                <div class="chapter-card good">
                    <div class="chapter-number">Chapter 5</div>
                    <div class="chapter-score" style="color: #667eea;">9/12</div>
                    <div class="chapter-detail">75% - ì–‘í˜¸</div>
                </div>
            </div>
        </div>

        <!-- ì¶”ì²œì‚¬í•­ -->
        <div class="recommendations">
            <h2 class="section-title">ğŸ’¡ í•™ìŠµ ë¶„ì„ ë° ì¶”ì²œì‚¬í•­</h2>

            <div class="recommendation-text" id="recommendation-text">
                ì¶•í•˜í•©ë‹ˆë‹¤! The Book Thief í…ŒìŠ¤íŠ¸ë¥¼ ì„±ê³µì ìœ¼ë¡œ í†µê³¼í•˜ì…¨ìŠµë‹ˆë‹¤.
                ì „ë°˜ì ìœ¼ë¡œ ìš°ìˆ˜í•œ ë…í•´ ì‹¤ë ¥ì„ ë³´ì—¬ì£¼ì…¨ìœ¼ë©°, íŠ¹íˆ ìŠ¤í† ë¦¬ì˜ ì´ˆë°˜ë¶€ ì´í•´ê°€ ë›°ì–´ë‚©ë‹ˆë‹¤.
                ë‹¤ìŒ ë ˆë²¨ì˜ ë„ì„œì— ë„ì „í•˜ê±°ë‚˜ ê°™ì€ ë ˆë²¨ì˜ ë‹¤ë¥¸ ì‘í’ˆì„ ì½ì–´ë³´ì‹œê¸°ë¥¼ ì¶”ì²œí•©ë‹ˆë‹¤.
            </div>

            <div class="strengths-weaknesses">
                <div class="strength-list">
                    <div class="list-title">
                        <span>ğŸ’ª</span>
                        <span>ê°•ì  ì˜ì—­</span>
                    </div>
                    <div class="list-item">Chapter 1: ë“±ì¥ì¸ë¬¼ ì´í•´</div>
                    <div class="list-item">Chapter 2: ìŠ¤í† ë¦¬ ì „ê°œ</div>
                    <div class="list-item">ì „ë°˜ì ì¸ ë…í•´ë ¥</div>
                </div>

                <div class="weakness-list">
                    <div class="list-title">
                        <span>ğŸ“ˆ</span>
                        <span>ë³´ì™„ ì˜ì—­</span>
                    </div>
                    <div class="list-item">Chapter 4: ë³µì¡í•œ ê´€ê³„ ì´í•´</div>
                    <div class="list-item">ê³ ê¸‰ ì–´íœ˜ í•™ìŠµ</div>
                    <div class="list-item">ë¬¸ë§¥ ì¶”ë¡  ëŠ¥ë ¥</div>
                </div>
            </div>

            <div class="action-buttons">
                <a href="/level-test" class="action-btn secondary-btn">
                    ğŸ”„ ë‹¤ë¥¸ í…ŒìŠ¤íŠ¸ ë³´ê¸°
                </a>
                <a href="/" class="action-btn primary-btn">
                    ğŸ  í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸°
                </a>
                <a href="#" class="action-btn success-btn" onclick="printResult()">
                    ğŸ–¨ï¸ ê²°ê³¼ ì¶œë ¥í•˜ê¸°
                </a>
            </div>
        </div>
    </div>

    <script>
        // ê²°ê³¼ ë°ì´í„° ë¡œë“œ ë° í‘œì‹œ
        function loadTestResults() {
            // sessionStorageì—ì„œ ê²°ê³¼ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
            const results = JSON.parse(sessionStorage.getItem('levelTestResults') || '{}');

            if (Object.keys(results).length === 0) {
                // ê²°ê³¼ ë°ì´í„°ê°€ ì—†ìœ¼ë©´ ìƒ˜í”Œ ë°ì´í„° ì‚¬ìš©
                displaySampleResults();
                return;
            }

            // ì‹¤ì œ ê²°ê³¼ í‘œì‹œ
            displayResults(results);
        }

        function displaySampleResults() {
            // ìƒ˜í”Œ ê²°ê³¼ ë°ì´í„° (ì‹¤ì œë¡œëŠ” ì„œë²„ì—ì„œ ë°›ì•„ì˜´)
            const sampleResults = {
                student_name: 'í™ê¸¸ë™',
                book_title: 'The Book Thief',
                book_author: 'Markus Zusak',
                level: 5,
                correct_answers: 48,
                total_questions: 60,
                percentage: 80,
                grade: 'B',
                passed: true,
                time_spent: 75 * 60, // 75ë¶„ì„ ì´ˆë¡œ ë³€í™˜
                chapter_analysis: {
                    chapter_1: { correct: 11, total: 12, percentage: 91.7 },
                    chapter_2: { correct: 10, total: 12, percentage: 83.3 },
                    chapter_3: { correct: 9, total: 12, percentage: 75.0 },
                    chapter_4: { correct: 9, total: 12, percentage: 75.0 },
                    chapter_5: { correct: 9, total: 12, percentage: 75.0 }
                }
            };

            displayResults(sampleResults);
        }

        function displayResults(results) {
            // ê¸°ë³¸ ì •ë³´ ì—…ë°ì´íŠ¸
            document.getElementById('student-info').textContent = `${results.student_name}ë‹˜ì˜ ë ˆë²¨í…ŒìŠ¤íŠ¸ ê²°ê³¼`;
            document.getElementById('book-info').textContent = `${results.book_title} by ${results.book_author}`;

            // ì ìˆ˜ ì •ë³´ ì—…ë°ì´íŠ¸
            document.getElementById('correct-answers').textContent = results.correct_answers;
            document.getElementById('total-questions').textContent = results.total_questions;
            document.getElementById('percentage').textContent = `${results.percentage}%`;

            const timeMinutes = Math.floor(results.time_spent / 60);
            document.getElementById('time-spent').textContent = `${timeMinutes}ë¶„`;

            // ë“±ê¸‰ ë° í•©ê²© ìƒíƒœ
            document.getElementById('grade-display').textContent = results.grade;
            document.getElementById('final-grade').textContent = results.grade;

            const passStatus = document.getElementById('pass-status');
            const resultIcon = document.getElementById('result-icon');
            const resultTitle = document.getElementById('result-title');

            if (results.passed) {
                passStatus.className = 'pass-status passed';
                passStatus.innerHTML = 'ğŸŠ í•©ê²©! ì¶•í•˜í•©ë‹ˆë‹¤!';
                resultIcon.textContent = 'ğŸ‰';
                resultTitle.textContent = 'í…ŒìŠ¤íŠ¸ í†µê³¼!';
            } else {
                passStatus.className = 'pass-status failed';
                passStatus.innerHTML = 'ğŸ“š ì¬ì‹œí—˜ ê¶Œì¥';
                resultIcon.textContent = 'ğŸ“–';
                resultTitle.textContent = 'ì¡°ê¸ˆ ë” ë…¸ë ¥í•´ë³´ì„¸ìš”!';
            }

            // í…ŒìŠ¤íŠ¸ ë‚ ì§œ
            const today = new Date();
            document.getElementById('test-date').textContent =
                `${today.getFullYear()}.${String(today.getMonth() + 1).padStart(2, '0')}.${String(today.getDate()).padStart(2, '0')}`;

            document.getElementById('test-level').textContent = `Level ${results.level}`;

            // ì±•í„°ë³„ ë¶„ì„ ì—…ë°ì´íŠ¸
            updateChapterAnalysis(results.chapter_analysis);

            // ì¶”ì²œì‚¬í•­ ì—…ë°ì´íŠ¸
            updateRecommendations(results);
        }

        function updateChapterAnalysis(chapterData) {
            const chapterGrid = document.getElementById('chapter-grid');
            chapterGrid.innerHTML = '';

            for (let i = 1; i <= 5; i++) {
                const chapter = chapterData[`chapter_${i}`];
                if (chapter) {
                    const percentage = chapter.percentage;
                    let className = 'chapter-card ';
                    let color = '';
                    let status = '';

                    if (percentage >= 90) {
                        className += 'excellent';
                        color = '#28a745';
                        status = 'ìš°ìˆ˜';
                    } else if (percentage >= 80) {
                        className += 'good';
                        color = '#667eea';
                        status = 'ì–‘í˜¸';
                    } else if (percentage >= 70) {
                        className += 'needs-work';
                        color = '#ffc107';
                        status = 'ë³´ì™„í•„ìš”';
                    } else {
                        className += 'poor';
                        color = '#dc3545';
                        status = 'ë¯¸í¡';
                    }

                    const chapterCard = document.createElement('div');
                    chapterCard.className = className;
                    chapterCard.innerHTML = `
                        <div class="chapter-number">Chapter ${i}</div>
                        <div class="chapter-score" style="color: ${color};">${chapter.correct}/${chapter.total}</div>
                        <div class="chapter-detail">${Math.round(percentage)}% - ${status}</div>
                    `;

                    chapterGrid.appendChild(chapterCard);
                }
            }
        }

        function updateRecommendations(results) {
            let recommendationText = '';

            if (results.passed) {
                recommendationText = `ì¶•í•˜í•©ë‹ˆë‹¤! ${results.book_title} í…ŒìŠ¤íŠ¸ë¥¼ ì„±ê³µì ìœ¼ë¡œ í†µê³¼í•˜ì…¨ìŠµë‹ˆë‹¤.
                    ì „ë°˜ì ìœ¼ë¡œ ìš°ìˆ˜í•œ ë…í•´ ì‹¤ë ¥ì„ ë³´ì—¬ì£¼ì…¨ìœ¼ë©°, ë‹¤ìŒ ë ˆë²¨ì˜ ë„ì„œì— ë„ì „í•˜ê±°ë‚˜
                    ê°™ì€ ë ˆë²¨ì˜ ë‹¤ë¥¸ ì‘í’ˆì„ ì½ì–´ë³´ì‹œê¸°ë¥¼ ì¶”ì²œí•©ë‹ˆë‹¤.`;
            } else {
                recommendationText = `${results.book_title}ë¥¼ ë‹¤ì‹œ í•œ ë²ˆ ì½ì–´ë³´ì‹œê³ 
                    íŠ¹íˆ ì•½ì ìœ¼ë¡œ ë‚˜íƒ€ë‚œ ì±•í„°ë“¤ì„ ì¤‘ì ì ìœ¼ë¡œ ë³µìŠµí•˜ì‹  í›„ ì¬ì‹œí—˜ì„ ë³´ì‹œê¸°ë¥¼ ì¶”ì²œí•©ë‹ˆë‹¤.`;
            }

            document.getElementById('recommendation-text').textContent = recommendationText;
        }

        function printResult() {
            window.print();
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ê²°ê³¼ í‘œì‹œ
        window.addEventListener('load', loadTestResults);
    </script>
</body>
</html>
